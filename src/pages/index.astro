---
import Layout from '@/layouts/Layout.astro'
import PageHead from '@/components/PageHead.astro'
import BlogCard from '@/components/BlogCard.astro'
import { SITE } from '@/consts'
import { getAllPosts } from '@/lib/data-utils'

const pageTitle = `${SITE.title} â€” Stronger through Structure`
const pageDescription = SITE.description

// Get the 3 most recent blog posts
const allPosts = await getAllPosts()
const recentPosts = allPosts.slice(0, 3)
---

<Layout>
  <PageHead slot="head" title={pageTitle} description={pageDescription} />

  <!-- Hero Section -->
  <section class="py-16 md:py-20">
    <div class="container mx-auto px-6">
      <div class="max-w-4xl mx-auto text-center">
        <h1 class="text-4xl md:text-6xl font-extrabold text-foreground">
          Stronger through structure.
        </h1>
        <p class="mt-4 text-xl md:text-2xl font-bold bg-gradient-to-r from-blue-400 to-indigo-600 bg-clip-text text-transparent">
          Smart kettlebell workouts built in seconds.
        </p>
        <p class="mt-6 text-lg text-muted-foreground max-w-2xl mx-auto">
          When the plan's built, you just show up. Generate a balanced EMOM in under 60 seconds and press start. Calm, clear, and efficient: strength through systems, not hype.
        </p>

        <!-- Phone Mockup Section -->
        <div class="flex justify-center mt-12 mb-8">
          <div class="bg-secondary p-2 sm:p-4 rounded-2xl sm:rounded-3xl shadow-2xl border border-border">
            <div id="screenshot-container" class="relative w-64 h-auto sm:w-80 bg-background rounded-xl sm:rounded-2xl overflow-hidden">
              <img src="/media/screenshot-1.png" alt="App screenshot showing the workout generation screen" class="screenshot w-full h-auto transition-opacity duration-500 ease-in-out opacity-100">
              <img src="/media/screenshot-2.png" alt="App screenshot showing the EMOM timer in action" class="screenshot w-full h-auto transition-opacity duration-500 ease-in-out opacity-0 absolute top-0 left-0">
              <img src="/media/screenshot-3.png" alt="App screenshot showing the workout completion screen" class="screenshot w-full h-auto transition-opacity duration-500 ease-in-out opacity-0 absolute top-0 left-0">
            </div>
          </div>
        </div>

        <div class="flex justify-center gap-4 flex-wrap">
          <a 
            href="https://apps.apple.com/at/app/kettlebell-emom/id6753604738?l=en-GB" 
            class="bg-gradient-to-r from-blue-400 to-indigo-600 hover:from-blue-500 hover:to-indigo-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-transform duration-300 inline-flex items-center"
          >
            <svg class="w-6 h-6 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.463 8.999l-4.95.001c-1.534 0-2.193.9-2.213 2.492l-.001 5.05c0 1.593.68 2.493 2.214 2.493l4.95-.001c1.534 0 2.213-.9 2.213-2.493v-5.05c0-1.592-.68-2.492-2.213-2.492zm-7.013 5.051c0-2.58 1.48-4.993 3.763-4.993h1.5c.414 0 .75.336.75.75s-.336.75-.75.75h-1.5c-1.534 0-2.263 1.593-2.263 3.493s.73 3.494 2.263 3.494h1.5c.414 0 .75.336.75.75s-.336.75-.75.75h-1.5c-2.283 0-3.763-2.413-3.763-4.994zM12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm0 18c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8z"></path>
            </svg>
            <span>Download on the App&nbsp;Store</span>
          </a>
        </div>
        <p class="mt-3 text-sm text-muted-foreground">Strong today. Stronger tomorrow. Built for decades.</p>
        <p class="mt-1 text-sm text-muted-foreground">iPhone first. Android coming soon.</p>
      </div>
    </div>
  </section>

  <!-- Value Proposition Section -->
  <section id="features" class="py-20 sm:py-24">
    <div class="container mx-auto px-6">
      <div class="max-w-5xl mx-auto text-center">
        <h2 class="text-3xl md:text-4xl font-extrabold text-foreground">From app start to workout in 60 seconds</h2>
        <p class="mt-4 text-lg text-muted-foreground">No hype. No chaos. Just a plan you can start now.</p>
      </div>

      <div class="mt-16 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-5xl mx-auto">
        <!-- Feature 1: Speed -->
        <div class="bg-secondary p-8 rounded-xl border border-border">
          <div class="bg-gradient-to-r from-blue-400 to-indigo-600 w-12 h-12 rounded-lg flex items-center justify-center">
            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
            </svg>
          </div>
          <h3 class="mt-6 text-xl font-bold text-foreground">Speed</h3>
          <p class="mt-2 text-muted-foreground">Create a new, perfectly balanced workout in under 60 seconds. Select your muscle groups, set your rounds, and go.</p>
        </div>

        <!-- Feature 2: Clarity -->
        <div class="bg-secondary p-8 rounded-xl border border-border">
          <div class="bg-gradient-to-r from-blue-400 to-indigo-600 w-12 h-12 rounded-lg flex items-center justify-center">
            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
            </svg>
          </div>
          <h3 class="mt-6 text-xl font-bold text-foreground">Clarity</h3>
          <p class="mt-2 text-muted-foreground">Our smart generator arranges exercises in a scientifically informed pattern for maximum effectiveness and safety. No more guesswork.</p>
        </div>

        <!-- Feature 3: Structure -->
        <div class="bg-secondary p-8 rounded-xl border border-border">
          <div class="bg-gradient-to-r from-blue-400 to-indigo-600 w-12 h-12 rounded-lg flex items-center justify-center">
            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <h3 class="mt-6 text-xl font-bold text-foreground">Structure</h3>
          <p class="mt-2 text-muted-foreground">A built-in EMOM timer, clear progress display, and a smooth workout flow keep you focused and in the zone from start to finish.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- How it works Section -->
  <section id="how-it-works" class="py-20 sm:py-24 bg-muted/30">
    <div class="container mx-auto px-6">
      <div class="max-w-5xl mx-auto">
        <div class="text-center">
          <h2 class="text-3xl md:text-4xl font-extrabold text-foreground">Simple, Fast, Effective.</h2>
          <p class="mt-4 text-lg text-muted-foreground">Get a great workout in three simple steps.</p>
        </div>

        <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12 text-center">
          <!-- Step 1 -->
          <div class="flex flex-col items-center">
            <div class="flex items-center justify-center w-20 h-20 border-2 border-blue-400 rounded-full text-blue-400 text-3xl font-bold">
              1
            </div>
            <h3 class="mt-6 text-xl font-bold text-foreground">Choose</h3>
            <p class="mt-2 text-muted-foreground">Select your target muscle groups, number of exercises, and total rounds.</p>
          </div>

          <!-- Step 2 -->
          <div class="flex flex-col items-center">
            <div class="flex items-center justify-center w-20 h-20 border-2 border-indigo-500 rounded-full text-indigo-500 text-3xl font-bold">
              2
            </div>
            <h3 class="mt-6 text-xl font-bold text-foreground">Generate</h3>
            <p class="mt-2 text-muted-foreground">The app instantly builds a balanced workout with an auto-generated name.</p>
          </div>

          <!-- Step 3 -->
          <div class="flex flex-col items-center">
            <div class="flex items-center justify-center w-20 h-20 border-2 border-green-500 rounded-full text-green-500 text-3xl font-bold">
              3
            </div>
            <h3 class="mt-6 text-xl font-bold text-foreground">Train</h3>
            <p class="mt-2 text-muted-foreground">Tap "Start Workout" and follow the guided EMOM timer to completion.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Core Features Section -->
  <section id="core-features" class="py-20 sm:py-24">
    <div class="container mx-auto px-6">
      <div class="max-w-3xl mx-auto">
        <div class="text-center">
          <h2 class="text-3xl md:text-4xl font-extrabold text-foreground">Everything You Need, Nothing You Don't</h2>
          <p class="mt-4 text-lg text-muted-foreground">Designed for clarity and focus, so every workout feels effortless to start.</p>
        </div>
        <ul class="mt-12 space-y-4">
          <li class="flex items-start p-4 bg-secondary rounded-lg">
            <svg class="w-6 h-6 text-green-500 mr-4 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <div>
              <h4 class="font-bold text-foreground">Curated Exercise Library</h4>
              <p class="text-muted-foreground">Beginner and intermediate-friendly kettlebell exercises, tagged by muscle group.</p>
            </div>
          </li>
          <li class="flex items-start p-4 bg-secondary rounded-lg">
            <svg class="w-6 h-6 text-green-500 mr-4 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <div>
              <h4 class="font-bold text-foreground">Smart Workout Generator</h4>
              <p class="text-muted-foreground">Creates balanced routines that cover your chosen muscle groups evenly.</p>
            </div>
          </li>
          <li class="flex items-start p-4 bg-secondary rounded-lg">
            <svg class="w-6 h-6 text-green-500 mr-4 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <div>
              <h4 class="font-bold text-foreground">Integrated EMOM Timer</h4>
              <p class="text-muted-foreground">Displays current/next exercise, round counters, and total time remaining. Includes pause and resume.</p>
            </div>
          </li>
          <li class="flex items-start p-4 bg-secondary rounded-lg">
            <svg class="w-6 h-6 text-green-500 mr-4 flex-shrink-0 mt-1" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
            <div>
              <h4 class="font-bold text-foreground">Motivational Feedback</h4>
              <p class="text-muted-foreground">Auto-generated workout names and a motivating completion screen keep you engaged.</p>
            </div>
          </li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Latest from the Blog Section -->
  <section class="py-20 sm:py-24 bg-muted/30">
    <div class="container mx-auto px-6">
      <div class="max-w-3xl mx-auto">
        <div class="flex items-center justify-between mb-8">
          <h2 class="text-3xl md:text-4xl font-extrabold text-foreground">Latest from the Blog</h2>
          <a 
            href="/blog" 
            class="text-primary hover:text-primary/80 transition-colors flex items-center gap-1 text-sm font-semibold"
          >
            <span>View all</span>
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </a>
        </div>
        
        {recentPosts.length > 0 ? (
          <div class="space-y-2">
            {recentPosts.map((post) => (
              <BlogCard entry={post} />
            ))}
          </div>
        ) : (
          <p class="text-muted-foreground text-center py-8">No blog posts yet. Check back soon!</p>
        )}
      </div>
    </div>
  </section>
</Layout>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const screenshots = document.querySelectorAll('#screenshot-container .screenshot');
    if (screenshots.length <= 1) return;

    let currentIndex = 0;
    const rotationInterval = 3000; // 3 seconds

    setInterval(() => {
      // Fade out the current screenshot
      screenshots[currentIndex].classList.remove('opacity-100');
      screenshots[currentIndex].classList.add('opacity-0');

      // Update the index to the next screenshot, looping back to the start
      currentIndex = (currentIndex + 1) % screenshots.length;

      // Fade in the new screenshot
      screenshots[currentIndex].classList.remove('opacity-0');
      screenshots[currentIndex].classList.add('opacity-100');
    }, rotationInterval);
  });
</script>
