import{j as p,a as ts,u as Xt,c as jt}from"./index.BPOJtumg.js";import{a as S}from"./index.B-GLnoY4.js";import{c as tt,B as es}from"./button.C1VSZQB7.js";import{P as Jt,c as yt}from"./index.jSGvztcl.js";import{c as ss,P as Nt,b as is}from"./index.BhhDWqJQ.js";import{P as ns,R as rs,h as os,u as ls,F as hs,D as cs,a as us,b as zt}from"./index.BsBGpvmB.js";import"./index.CrTOgVXp.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const as=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ie=tt("calendar",as);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fs=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ds=tt("chevron-down",fs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gs=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ps=tt("circle-alert",gs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ms=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],xs=tt("clock",ms);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ws=tt("file-text",ys);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vs=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],bs=tt("hash",vs);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],js=tt("loader-circle",ks);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ns=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Lt=tt("search",Ns);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ss=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],we=tt("x",Ss);var Pt="Dialog",[ve]=ss(Pt),[Cs,U]=ve(Pt),be=t=>{const{__scopeDialog:s,children:e,open:n,defaultOpen:i,onOpenChange:r,modal:o=!0}=t,l=S.useRef(null),h=S.useRef(null),[c,u]=us({prop:n,defaultProp:i??!1,onChange:r,caller:Pt});return p.jsx(Cs,{scope:s,triggerRef:l,contentRef:h,contentId:zt(),titleId:zt(),descriptionId:zt(),open:c,onOpenChange:u,onOpenToggle:S.useCallback(()=>u(a=>!a),[u]),modal:o,children:e})};be.displayName=Pt;var ke="DialogTrigger",_s=S.forwardRef((t,s)=>{const{__scopeDialog:e,...n}=t,i=U(ke,e),r=Xt(s,i.triggerRef);return p.jsx(Nt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Zt(i.open),...n,ref:r,onClick:yt(t.onClick,i.onOpenToggle)})});_s.displayName=ke;var Yt="DialogPortal",[Rs,je]=ve(Yt,{forceMount:void 0}),Ne=t=>{const{__scopeDialog:s,forceMount:e,children:n,container:i}=t,r=U(Yt,s);return p.jsx(Rs,{scope:s,forceMount:e,children:S.Children.map(n,o=>p.jsx(Jt,{present:e||r.open,children:p.jsx(ns,{asChild:!0,container:i,children:o})}))})};Ne.displayName=Yt;var It="DialogOverlay",Se=S.forwardRef((t,s)=>{const e=je(It,t.__scopeDialog),{forceMount:n=e.forceMount,...i}=t,r=U(It,t.__scopeDialog);return r.modal?p.jsx(Jt,{present:n||r.open,children:p.jsx(Is,{...i,ref:s})}):null});Se.displayName=It;var Es=ts("DialogOverlay.RemoveScroll"),Is=S.forwardRef((t,s)=>{const{__scopeDialog:e,...n}=t,i=U(It,e);return p.jsx(rs,{as:Es,allowPinchZoom:!0,shards:[i.contentRef],children:p.jsx(Nt.div,{"data-state":Zt(i.open),...n,ref:s,style:{pointerEvents:"auto",...n.style}})})}),rt="DialogContent",Ce=S.forwardRef((t,s)=>{const e=je(rt,t.__scopeDialog),{forceMount:n=e.forceMount,...i}=t,r=U(rt,t.__scopeDialog);return p.jsx(Jt,{present:n||r.open,children:r.modal?p.jsx(Ds,{...i,ref:s}):p.jsx(Ms,{...i,ref:s})})});Ce.displayName=rt;var Ds=S.forwardRef((t,s)=>{const e=U(rt,t.__scopeDialog),n=S.useRef(null),i=Xt(s,e.contentRef,n);return S.useEffect(()=>{const r=n.current;if(r)return os(r)},[]),p.jsx(_e,{...t,ref:i,trapFocus:e.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:yt(t.onCloseAutoFocus,r=>{r.preventDefault(),e.triggerRef.current?.focus()}),onPointerDownOutside:yt(t.onPointerDownOutside,r=>{const o=r.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&r.preventDefault()}),onFocusOutside:yt(t.onFocusOutside,r=>r.preventDefault())})}),Ms=S.forwardRef((t,s)=>{const e=U(rt,t.__scopeDialog),n=S.useRef(!1),i=S.useRef(!1);return p.jsx(_e,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{t.onCloseAutoFocus?.(r),r.defaultPrevented||(n.current||e.triggerRef.current?.focus(),r.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:r=>{t.onInteractOutside?.(r),r.defaultPrevented||(n.current=!0,r.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=r.target;e.triggerRef.current?.contains(o)&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&i.current&&r.preventDefault()}})}),_e=S.forwardRef((t,s)=>{const{__scopeDialog:e,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:r,...o}=t,l=U(rt,e),h=S.useRef(null),c=Xt(s,h);return ls(),p.jsxs(p.Fragment,{children:[p.jsx(hs,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:r,children:p.jsx(cs,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":Zt(l.open),...o,ref:c,onDismiss:()=>l.onOpenChange(!1)})}),p.jsxs(p.Fragment,{children:[p.jsx(As,{titleId:l.titleId}),p.jsx(Ps,{contentRef:h,descriptionId:l.descriptionId})]})]})}),Gt="DialogTitle",Re=S.forwardRef((t,s)=>{const{__scopeDialog:e,...n}=t,i=U(Gt,e);return p.jsx(Nt.h2,{id:i.titleId,...n,ref:s})});Re.displayName=Gt;var Ee="DialogDescription",Ie=S.forwardRef((t,s)=>{const{__scopeDialog:e,...n}=t,i=U(Ee,e);return p.jsx(Nt.p,{id:i.descriptionId,...n,ref:s})});Ie.displayName=Ee;var De="DialogClose",Me=S.forwardRef((t,s)=>{const{__scopeDialog:e,...n}=t,i=U(De,e);return p.jsx(Nt.button,{type:"button",...n,ref:s,onClick:yt(t.onClick,()=>i.onOpenChange(!1))})});Me.displayName=De;function Zt(t){return t?"open":"closed"}var Ae="DialogTitleWarning",[ki,Oe]=is(Ae,{contentName:rt,titleName:Gt,docsSlug:"dialog"}),As=({titleId:t})=>{const s=Oe(Ae),e=`\`${s.contentName}\` requires a \`${s.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${s.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${s.docsSlug}`;return S.useEffect(()=>{t&&(document.getElementById(t)||console.error(e))},[e,t]),null},Os="DialogDescriptionWarning",Ps=({contentRef:t,descriptionId:s})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Oe(Os).contentName}}.`;return S.useEffect(()=>{const i=t.current?.getAttribute("aria-describedby");s&&i&&(document.getElementById(s)||console.warn(n))},[n,t,s]),null},Ts=be,zs=Ne,Pe=Se,Te=Ce,ze=Re,$e=Ie,$s=Me;const Bs="modulepreload",Ls=function(t){return"/"+t},ne={},Hs=function(s,e,n){let i=Promise.resolve();if(e&&e.length>0){let o=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(a=>({status:"fulfilled",value:a}),a=>({status:"rejected",reason:a}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),h=l?.nonce||l?.getAttribute("nonce");i=o(e.map(c=>{if(c=Ls(c),c in ne)return;ne[c]=!0;const u=c.endsWith(".css"),a=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${a}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":Bs,u||(m.as="script"),m.crossOrigin="",m.href=c,h&&m.setAttribute("nonce",h),document.head.appendChild(m),u)return new Promise((g,x)=>{m.addEventListener("load",g),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return s().catch(r)})};var v;function W(t,s,e){const n=typeof e,i=typeof t;if(n!=="undefined"){if(i!=="undefined"){if(e){if(i==="function"&&n===i)return function(l){return t(e(l))};if(s=t.constructor,s===e.constructor){if(s===Array)return e.concat(t);if(s===Map){var r=new Map(e);for(var o of t)r.set(o[0],o[1]);return r}if(s===Set){o=new Set(e);for(r of t.values())o.add(r);return o}}}return t}return e}return i==="undefined"?s:t}function ht(t,s){return typeof t>"u"?s:t}function L(){return Object.create(null)}function Y(t){return typeof t=="string"}function wt(t){return typeof t=="object"}function vt(t,s){if(Y(s))t=t[s];else for(let e=0;t&&e<s.length;e++)t=t[s[e]];return t}const Fs=/[^\p{L}\p{N}]+/u,Ws=/(\d{3})/g,Ks=/(\D)(\d{3})/g,Vs=/(\d{3})(\D)/g,re=/[\u0300-\u036f]/g;function bt(t={}){if(!this||this.constructor!==bt)return new bt(...arguments);if(arguments.length)for(t=0;t<arguments.length;t++)this.assign(arguments[t]);else this.assign(t)}v=bt.prototype;v.assign=function(t){this.normalize=W(t.normalize,!0,this.normalize);let s=t.include,e=s||t.exclude||t.split,n;if(e||e===""){if(typeof e=="object"&&e.constructor!==RegExp){let i="";n=!s,s||(i+="\\p{Z}"),e.letter&&(i+="\\p{L}"),e.number&&(i+="\\p{N}",n=!!s),e.symbol&&(i+="\\p{S}"),e.punctuation&&(i+="\\p{P}"),e.control&&(i+="\\p{C}"),(e=e.char)&&(i+=typeof e=="object"?e.join(""):e);try{this.split=new RegExp("["+(s?"^":"")+i+"]+","u")}catch{this.split=/\s+/}}else this.split=e,n=e===!1||"a1a".split(e).length<2;this.numeric=W(t.numeric,n)}else{try{this.split=W(this.split,Fs)}catch{this.split=/\s+/}this.numeric=W(t.numeric,W(this.numeric,!0))}if(this.prepare=W(t.prepare,null,this.prepare),this.finalize=W(t.finalize,null,this.finalize),e=t.filter,this.filter=typeof e=="function"?e:W(e&&new Set(e),null,this.filter),this.dedupe=W(t.dedupe,!0,this.dedupe),this.matcher=W((e=t.matcher)&&new Map(e),null,this.matcher),this.mapper=W((e=t.mapper)&&new Map(e),null,this.mapper),this.stemmer=W((e=t.stemmer)&&new Map(e),null,this.stemmer),this.replacer=W(t.replacer,null,this.replacer),this.minlength=W(t.minlength,1,this.minlength),this.maxlength=W(t.maxlength,1024,this.maxlength),this.rtl=W(t.rtl,!1,this.rtl),(this.cache=e=W(t.cache,!0,this.cache))&&(this.F=null,this.L=typeof e=="number"?e:2e5,this.B=new Map,this.D=new Map,this.I=this.H=128),this.h="",this.J=null,this.A="",this.K=null,this.matcher)for(const i of this.matcher.keys())this.h+=(this.h?"|":"")+i;if(this.stemmer)for(const i of this.stemmer.keys())this.A+=(this.A?"|":"")+i;return this};v.addStemmer=function(t,s){return this.stemmer||(this.stemmer=new Map),this.stemmer.set(t,s),this.A+=(this.A?"|":"")+t,this.K=null,this.cache&&ot(this),this};v.addFilter=function(t){return typeof t=="function"?this.filter=t:(this.filter||(this.filter=new Set),this.filter.add(t)),this.cache&&ot(this),this};v.addMapper=function(t,s){return typeof t=="object"?this.addReplacer(t,s):t.length>1?this.addMatcher(t,s):(this.mapper||(this.mapper=new Map),this.mapper.set(t,s),this.cache&&ot(this),this)};v.addMatcher=function(t,s){return typeof t=="object"?this.addReplacer(t,s):t.length<2&&(this.dedupe||this.mapper)?this.addMapper(t,s):(this.matcher||(this.matcher=new Map),this.matcher.set(t,s),this.h+=(this.h?"|":"")+t,this.J=null,this.cache&&ot(this),this)};v.addReplacer=function(t,s){return typeof t=="string"?this.addMatcher(t,s):(this.replacer||(this.replacer=[]),this.replacer.push(t,s),this.cache&&ot(this),this)};v.encode=function(t,s){if(this.cache&&t.length<=this.H)if(this.F){if(this.B.has(t))return this.B.get(t)}else this.F=setTimeout(ot,50,this);this.normalize&&(typeof this.normalize=="function"?t=this.normalize(t):t=re?t.normalize("NFKD").replace(re,"").toLowerCase():t.toLowerCase()),this.prepare&&(t=this.prepare(t)),this.numeric&&t.length>3&&(t=t.replace(Ks,"$1 $2").replace(Vs,"$1 $2").replace(Ws,"$1 "));const e=!(this.dedupe||this.mapper||this.filter||this.matcher||this.stemmer||this.replacer);let n=[],i=L(),r,o,l=this.split||this.split===""?t.split(this.split):[t];for(let c=0,u,a;c<l.length;c++)if((u=a=l[c])&&!(u.length<this.minlength||u.length>this.maxlength)){if(s){if(i[u])continue;i[u]=1}else{if(r===u)continue;r=u}if(e)n.push(u);else if(!this.filter||(typeof this.filter=="function"?this.filter(u):!this.filter.has(u))){if(this.cache&&u.length<=this.I)if(this.F){var h=this.D.get(u);if(h||h===""){h&&n.push(h);continue}}else this.F=setTimeout(ot,50,this);if(this.stemmer){this.K||(this.K=new RegExp("(?!^)("+this.A+")$"));let m;for(;m!==u&&u.length>2;)m=u,u=u.replace(this.K,g=>this.stemmer.get(g))}if(u&&(this.mapper||this.dedupe&&u.length>1)){h="";for(let m=0,g="",x,f;m<u.length;m++)x=u.charAt(m),x===g&&this.dedupe||((f=this.mapper&&this.mapper.get(x))||f===""?f===g&&this.dedupe||!(g=f)||(h+=f):h+=g=x);u=h}if(this.matcher&&u.length>1&&(this.J||(this.J=new RegExp("("+this.h+")","g")),u=u.replace(this.J,m=>this.matcher.get(m))),u&&this.replacer)for(h=0;u&&h<this.replacer.length;h+=2)u=u.replace(this.replacer[h],this.replacer[h+1]);if(this.cache&&a.length<=this.I&&(this.D.set(a,u),this.D.size>this.L&&(this.D.clear(),this.I=this.I/1.1|0)),u){if(u!==a)if(s){if(i[u])continue;i[u]=1}else{if(o===u)continue;o=u}n.push(u)}}}return this.finalize&&(n=this.finalize(n)||n),this.cache&&t.length<=this.H&&(this.B.set(t,n),this.B.size>this.L&&(this.B.clear(),this.H=this.H/1.1|0)),n};function ot(t){t.F=null,t.B.clear(),t.D.clear()}function Qt(t,s,e){e||(s||typeof t!="object"?typeof s=="object"&&(e=s,s=0):e=t),e&&(t=e.query||t,s=e.limit||s);let n=""+(s||0);e&&(n+=(e.offset||0)+!!e.context+!!e.suggest+(e.resolve!==!1)+(e.resolution||this.resolution)+(e.boost||0)),t=(""+t).toLowerCase(),this.cache||(this.cache=new lt);let i=this.cache.get(t+n);if(!i){const r=e&&e.cache;r&&(e.cache=!1),i=this.search(t,s,e),r&&(e.cache=r),this.cache.set(t+n,i)}return i}function lt(t){this.limit=t&&t!==!0?t:1e3,this.cache=new Map,this.h=""}lt.prototype.set=function(t,s){this.cache.set(this.h=t,s),this.cache.size>this.limit&&this.cache.delete(this.cache.keys().next().value)};lt.prototype.get=function(t){const s=this.cache.get(t);return s&&this.h!==t&&(this.cache.delete(t),this.cache.set(this.h=t,s)),s};lt.prototype.remove=function(t){for(const s of this.cache){const e=s[0];s[1].includes(t)&&this.cache.delete(e)}};lt.prototype.clear=function(){this.cache.clear(),this.h=""};const oe={normalize:!1,numeric:!1,dedupe:!1},St={},$t=new Map([["b","p"],["v","f"],["w","f"],["z","s"],["x","s"],["d","t"],["n","m"],["c","k"],["g","k"],["j","k"],["q","k"],["i","e"],["y","e"],["u","o"]]),le=new Map([["ae","a"],["oe","o"],["sh","s"],["kh","k"],["th","t"],["ph","f"],["pf","f"]]),he=[/([^aeo])h(.)/g,"$1$2",/([aeo])h([^aeo]|$)/g,"$1$2",/(.)\1+/g,"$1"],ce={a:"",e:"",i:"",o:"",u:"",y:"",b:1,f:1,p:1,v:1,c:2,g:2,j:2,k:2,q:2,s:2,x:2,z:2,ÃŸ:2,d:3,t:3,l:4,m:5,n:5,r:6};var Be={Exact:oe,Default:St,Normalize:St,LatinBalance:{mapper:$t},LatinAdvanced:{mapper:$t,matcher:le,replacer:he},LatinExtra:{mapper:$t,replacer:he.concat([/(?!^)[aeo]/g,""]),matcher:le},LatinSoundex:{dedupe:!1,include:{letter:!0},finalize:function(t){for(let e=0;e<t.length;e++){var s=t[e];let n=s.charAt(0),i=ce[n];for(let r=1,o;r<s.length&&(o=s.charAt(r),o==="h"||o==="w"||!(o=ce[o])||o===i||(n+=o,i=o,n.length!==4));r++);t[e]=n}}},CJK:{split:""},LatinExact:oe,LatinDefault:St,LatinSimple:St};function ue(t,s,e,n){let i=[];for(let r=0,o;r<t.index.length;r++)if(o=t.index[r],s>=o.length)s-=o.length;else{s=o[n?"splice":"slice"](s,e);const l=s.length;if(l&&(i=i.length?i.concat(s):s,e-=l,n&&(t.length-=l),!e))break;s=0}return i}function ft(t){if(!this||this.constructor!==ft)return new ft(t);this.index=t?[t]:[],this.length=t?t.length:0;const s=this;return new Proxy([],{get(e,n){if(n==="length")return s.length;if(n==="push")return function(i){s.index[s.index.length-1].push(i),s.length++};if(n==="pop")return function(){if(s.length)return s.length--,s.index[s.index.length-1].pop()};if(n==="indexOf")return function(i){let r=0;for(let o=0,l,h;o<s.index.length;o++){if(l=s.index[o],h=l.indexOf(i),h>=0)return r+h;r+=l.length}return-1};if(n==="includes")return function(i){for(let r=0;r<s.index.length;r++)if(s.index[r].includes(i))return!0;return!1};if(n==="slice")return function(i,r){return ue(s,i||0,r||s.length,!1)};if(n==="splice")return function(i,r){return ue(s,i||0,r||s.length,!0)};if(n==="constructor")return Array;if(typeof n!="symbol")return(e=s.index[n/2**31|0])&&e[n]},set(e,n,i){return e=n/2**31|0,(s.index[e]||(s.index[e]=[]))[n]=i,s.length++,!0}})}ft.prototype.clear=function(){this.index.length=0};ft.prototype.push=function(){};function G(t=8){if(!this||this.constructor!==G)return new G(t);this.index=L(),this.h=[],this.size=0,t>32?(this.B=He,this.A=BigInt(t)):(this.B=Le,this.A=t)}G.prototype.get=function(t){const s=this.index[this.B(t)];return s&&s.get(t)};G.prototype.set=function(t,s){var e=this.B(t);let n=this.index[e];n?(e=n.size,n.set(t,s),(e-=n.size)&&this.size++):(this.index[e]=n=new Map([[t,s]]),this.h.push(n),this.size++)};function Z(t=8){if(!this||this.constructor!==Z)return new Z(t);this.index=L(),this.h=[],this.size=0,t>32?(this.B=He,this.A=BigInt(t)):(this.B=Le,this.A=t)}Z.prototype.add=function(t){var s=this.B(t);let e=this.index[s];e?(s=e.size,e.add(t),(s-=e.size)&&this.size++):(this.index[s]=e=new Set([t]),this.h.push(e),this.size++)};v=G.prototype;v.has=Z.prototype.has=function(t){const s=this.index[this.B(t)];return s&&s.has(t)};v.delete=Z.prototype.delete=function(t){const s=this.index[this.B(t)];s&&s.delete(t)&&this.size--};v.clear=Z.prototype.clear=function(){this.index=L(),this.h=[],this.size=0};v.values=Z.prototype.values=function*(){for(let t=0;t<this.h.length;t++)for(let s of this.h[t].values())yield s};v.keys=Z.prototype.keys=function*(){for(let t=0;t<this.h.length;t++)for(let s of this.h[t].keys())yield s};v.entries=Z.prototype.entries=function*(){for(let t=0;t<this.h.length;t++)for(let s of this.h[t].entries())yield s};function Le(t){let s=2**this.A-1;if(typeof t=="number")return t&s;let e=0,n=this.A+1;for(let i=0;i<t.length;i++)e=(e*n^t.charCodeAt(i))&s;return this.A===32?e+2**31:e}function He(t){let s=BigInt(2)**this.A-BigInt(1);var e=typeof t;if(e==="bigint")return t&s;if(e==="number")return BigInt(t)&s;e=BigInt(0);let n=this.A+BigInt(1);for(let i=0;i<t.length;i++)e=(e*n^BigInt(t.charCodeAt(i)))&s;return e}let ct,xt;async function Xs(t){t=t.data;var s=t.task;const e=t.id;let n=t.args;switch(s){case"init":xt=t.options||{},(s=t.factory)?(Function("return "+s)()(self),ct=new self.FlexSearch.Index(xt),delete self.FlexSearch):ct=new Q(xt),postMessage({id:e});break;default:let i;s==="export"&&(n[1]?(n[0]=xt.export,n[2]=0,n[3]=1):n=null),s==="import"?n[0]&&(t=await xt.import.call(ct,n[0]),ct.import(n[0],t)):((i=n&&ct[s].apply(ct,n))&&i.then&&(i=await i),i&&i.await&&(i=await i.await),s==="search"&&i.result&&(i=i.result)),postMessage(s==="search"?{id:e,msg:i}:{id:e})}}function Ut(t){ut.call(t,"add"),ut.call(t,"append"),ut.call(t,"search"),ut.call(t,"update"),ut.call(t,"remove"),ut.call(t,"searchCache")}let Ht,ae,Rt;function Js(){Ht=Rt=0}function ut(t){this[t+"Async"]=function(){const s=arguments;var e=s[s.length-1];let n;if(typeof e=="function"&&(n=e,delete s[s.length-1]),Ht?Rt||(Rt=Date.now()-ae>=this.priority*this.priority*3):(Ht=setTimeout(Js,0),ae=Date.now()),Rt){const r=this;return new Promise(o=>{setTimeout(function(){o(r[t+"Async"].apply(r,s))},0)})}const i=this[t].apply(this,s);return e=i.then?i:new Promise(r=>r(i)),n&&e.then(n),e}}let et=0;function dt(t={},s){function e(l){function h(c){c=c.data||c;const u=c.id,a=u&&r.h[u];a&&(a(c.msg),delete r.h[u])}if(this.worker=l,this.h=L(),this.worker)return i?this.worker.on("message",h):this.worker.onmessage=h,t.config?new Promise(function(c){et>1e9&&(et=0),r.h[++et]=function(){c(r)},r.worker.postMessage({id:et,task:"init",factory:n,options:t})}):(this.priority=t.priority||4,this.encoder=s||null,this.worker.postMessage({task:"init",factory:n,options:t}),this)}if(!this||this.constructor!==dt)return new dt(t);let n=typeof self<"u"?self._factory:typeof window<"u"?window._factory:null;n&&(n=n.toString());const i=typeof window>"u",r=this,o=Ys(n,i,t.worker);return o.then?o.then(function(l){return e.call(r,l)}):e.call(this,o)}st("add");st("append");st("search");st("update");st("remove");st("clear");st("export");st("import");dt.prototype.searchCache=Qt;Ut(dt.prototype);function st(t){dt.prototype[t]=function(){const s=this,e=[].slice.call(arguments);var n=e[e.length-1];let i;return typeof n=="function"&&(i=n,e.pop()),n=new Promise(function(r){t==="export"&&typeof e[0]=="function"&&(e[0]=null),et>1e9&&(et=0),s.h[++et]=r,s.worker.postMessage({task:t,id:et,args:e})}),i?(n.then(i),this):n}}function Ys(t,s,e){return s?typeof module<"u"?new(require("worker_threads")).Worker(__dirname+"/worker/node.js"):Hs(()=>import("./__vite-browser-external.BIHI7g3E.js"),[]).then(function(n){return new n.Worker(import.meta.dirname+"/node/node.mjs")}):t?new window.Worker(URL.createObjectURL(new Blob(["onmessage="+Xs.toString()],{type:"text/javascript"}))):new window.Worker(typeof e=="string"?e:import.meta.url.replace("/worker.js","/worker/worker.js").replace("flexsearch.bundle.module.min.js","module/worker/worker.js").replace("flexsearch.bundle.module.min.mjs","module/worker/worker.js"),{type:"module"})}gt.prototype.add=function(t,s,e){if(wt(t)&&(s=t,t=vt(s,this.key)),s&&(t||t===0)){if(!e&&this.reg.has(t))return this.update(t,s);for(let l=0,h;l<this.field.length;l++){h=this.B[l];var n=this.index.get(this.field[l]);if(typeof h=="function"){var i=h(s);i&&n.add(t,i,e,!0)}else i=h.G,(!i||i(s))&&(h.constructor===String?h=[""+h]:Y(h)&&(h=[h]),Wt(s,h,this.D,0,n,t,h[0],e))}if(this.tag)for(n=0;n<this.A.length;n++){var r=this.A[n];i=this.tag.get(this.F[n]);let l=L();if(typeof r=="function"){if(r=r(s),!r)continue}else{var o=r.G;if(o&&!o(s))continue;r.constructor===String&&(r=""+r),r=vt(s,r)}if(i&&r){Y(r)&&(r=[r]);for(let h=0,c,u;h<r.length;h++)if(c=r[h],!l[c]&&(l[c]=1,(o=i.get(c))?u=o:i.set(c,u=[]),!e||!u.includes(t))){if(u.length===2**31-1){if(o=new ft(u),this.fastupdate)for(let a of this.reg.values())a.includes(u)&&(a[a.indexOf(u)]=o);i.set(c,u=o)}u.push(t),this.fastupdate&&((o=this.reg.get(t))?o.push(u):this.reg.set(t,[u]))}}}if(this.store&&(!e||!this.store.has(t))){let l;if(this.h){l=L();for(let h=0,c;h<this.h.length;h++){if(c=this.h[h],(e=c.G)&&!e(s))continue;let u;if(typeof c=="function"){if(u=c(s),!u)continue;c=[c.O]}else if(Y(c)||c.constructor===String){l[c]=s[c];continue}Ft(s,l,c,0,c[0],u)}}this.store.set(t,l||s)}this.worker&&(this.fastupdate||this.reg.add(t))}return this};function Ft(t,s,e,n,i,r){if(t=t[i],n===e.length-1)s[i]=r||t;else if(t)if(t.constructor===Array)for(s=s[i]=Array(t.length),i=0;i<t.length;i++)Ft(t,s,e,n,i);else s=s[i]||(s[i]=L()),i=e[++n],Ft(t,s,e,n,i)}function Wt(t,s,e,n,i,r,o,l){if(t=t[o])if(n===s.length-1){if(t.constructor===Array){if(e[n]){for(s=0;s<t.length;s++)i.add(r,t[s],!0,!0);return}t=t.join(" ")}i.add(r,t,l,!0)}else if(t.constructor===Array)for(o=0;o<t.length;o++)Wt(t,s,e,n,i,r,o,l);else o=s[++n],Wt(t,s,e,n,i,r,o,l)}function qt(t,s,e,n){if(!t.length)return t;if(t.length===1)return t=t[0],t=e||t.length>s?t.slice(e,e+s):t,n?at.call(this,t):t;let i=[];for(let r=0,o,l;r<t.length;r++)if((o=t[r])&&(l=o.length)){if(e){if(e>=l){e-=l;continue}o=o.slice(e,e+s),l=o.length,e=0}if(l>s&&(o=o.slice(0,s),l=s),!i.length&&l>=s)return n?at.call(this,o):o;if(i.push(o),s-=l,!s)break}return i=i.length>1?[].concat.apply([],i):i[0],n?at.call(this,i):i}function Tt(t,s,e,n){var i=n[0];if(i[0]&&i[0].query)return t[s].apply(t,i);if(!(s!=="and"&&s!=="not"||t.result.length||t.await||i.suggest))return n.length>1&&(i=n[n.length-1]),(n=i.resolve)?t.await||t.result:t;let r=[],o=0,l=0,h,c,u,a,m;for(s=0;s<n.length;s++)if(i=n[s]){var g=void 0;if(i.constructor===O)g=i.await||i.result;else if(i.then||i.constructor===Array)g=i;else{o=i.limit||0,l=i.offset||0,u=i.suggest,c=i.resolve,h=((a=i.highlight||t.highlight)||i.enrich)&&c,g=i.queue;let x=i.async||g,f=i.index,d=i.query;if(f?t.index||(t.index=f):f=t.index,d||i.tag){const b=i.field||i.pluck;if(b&&(!d||t.query&&!a||(t.query=d,t.field=b,t.highlight=a),f=f.index.get(b)),g&&(m||t.await)){m=1;let y;const N=t.C.length,_=new Promise(function(I){y=I});(function(I,E){_.h=function(){E.index=null,E.resolve=!1;let C=x?I.searchAsync(E):I.search(E);return C.then?C.then(function(k){return t.C[N]=k=k.result||k,y(k),k}):(C=C.result||C,y(C),C)}})(f,Object.assign({},i)),t.C.push(_),r[s]=_;continue}else i.resolve=!1,i.index=null,g=x?f.searchAsync(i):f.search(i),i.resolve=c,i.index=f}else if(i.and)g=Ct(i,"and",f);else if(i.or)g=Ct(i,"or",f);else if(i.not)g=Ct(i,"not",f);else if(i.xor)g=Ct(i,"xor",f);else continue}g.await?(m=1,g=g.await):g.then?(m=1,g=g.then(function(x){return x.result||x})):g=g.result||g,r[s]=g}if(m&&!t.await&&(t.await=new Promise(function(x){t.return=x})),m){const x=Promise.all(r).then(function(f){for(let d=0;d<t.C.length;d++)if(t.C[d]===x){t.C[d]=function(){return e.call(t,f,o,l,h,c,u,a)};break}te(t)});t.C.push(x)}else if(t.await)t.C.push(function(){return e.call(t,r,o,l,h,c,u,a)});else return e.call(t,r,o,l,h,c,u,a);return c?t.await||t.result:t}function Ct(t,s,e){t=t[s];const n=t[0]||t;return n.index||(n.index=e),e=new O(n),t.length>1&&(e=e[s].apply(e,t.slice(1))),e}O.prototype.or=function(){return Tt(this,"or",Gs,arguments)};function Gs(t,s,e,n,i,r,o){return t.length&&(this.result.length&&t.push(this.result),t.length<2?this.result=t[0]:(this.result=Fe(t,s,e,!1,this.h),e=0)),i&&(this.await=null),i?this.resolve(s,e,n,o):this}O.prototype.and=function(){return Tt(this,"and",Zs,arguments)};function Zs(t,s,e,n,i,r,o){if(!r&&!this.result.length)return i?this.result:this;let l;if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{let h=0;for(let c=0,u,a;c<t.length;c++)if((u=t[c])&&(a=u.length))h<a&&(h=a);else if(!r){h=0;break}h?(this.result=Dt(t,h,s,e,r,this.h,i),l=!0):this.result=[]}else r||(this.result=t);return i&&(this.await=null),i?this.resolve(s,e,n,o,l):this}O.prototype.xor=function(){return Tt(this,"xor",Qs,arguments)};function Qs(t,s,e,n,i,r,o){if(t.length)if(this.result.length&&t.unshift(this.result),t.length<2)this.result=t[0];else{t:{r=e;var l=this.h;const h=[],c=L();let u=0;for(let a=0,m;a<t.length;a++)if(m=t[a]){u<m.length&&(u=m.length);for(let g=0,x;g<m.length;g++)if(x=m[g])for(let f=0,d;f<x.length;f++)d=x[f],c[d]=c[d]?2:1}for(let a=0,m,g=0;a<u;a++)for(let x=0,f;x<t.length;x++)if((f=t[x])&&(m=f[a])){for(let d=0,b;d<m.length;d++)if(b=m[d],c[b]===1)if(r)r--;else if(i){if(h.push(b),h.length===s){t=h;break t}}else{const y=a+(x?l:0);if(h[y]||(h[y]=[]),h[y].push(b),++g===s){t=h;break t}}}t=h}this.result=t,l=!0}else r||(this.result=t);return i&&(this.await=null),i?this.resolve(s,e,n,o,l):this}O.prototype.not=function(){return Tt(this,"not",Us,arguments)};function Us(t,s,e,n,i,r,o){if(!r&&!this.result.length)return i?this.result:this;if(t.length&&this.result.length){t:{r=e;var l=[];t=new Set(t.flat().flat());for(let h=0,c,u=0;h<this.result.length;h++)if(c=this.result[h]){for(let a=0,m;a<c.length;a++)if(m=c[a],!t.has(m)){if(r)r--;else if(i){if(l.push(m),l.length===s){t=l;break t}}else if(l[h]||(l[h]=[]),l[h].push(m),++u===s){t=l;break t}}}t=l}this.result=t,l=!0}return i&&(this.await=null),i?this.resolve(s,e,n,o,l):this}function Et(t,s,e,n,i){let r,o,l;typeof i=="string"?(r=i,i=""):r=i.template,o=r.indexOf("$1"),l=r.substring(o+2),o=r.substring(0,o);let h=i&&i.boundary,c=!i||i.clip!==!1,u=i&&i.merge&&l&&o&&new RegExp(l+" "+o,"g");i=i&&i.ellipsis;var a=0;if(typeof i=="object"){var m=i.template;a=m.length-2,i=i.pattern}typeof i!="string"&&(i=i===!1?"":"..."),a&&(i=m.replace("$1",i)),m=i.length-a;let g,x;typeof h=="object"&&(g=h.before,g===0&&(g=-1),x=h.after,x===0&&(x=-1),h=h.total||9e5),a=new Map;for(let A=0,M,K,z;A<s.length;A++){let X;if(n)X=s,z=n;else{var f=s[A];if(z=f.field,!z)continue;X=f.result}K=e.get(z),M=K.encoder,f=a.get(M),typeof f!="string"&&(f=M.encode(t),a.set(M,f));for(let $=0;$<X.length;$++){var d=X[$].doc;if(!d||(d=vt(d,z),!d))continue;var b=d.trim().split(/\s+/);if(!b.length)continue;d="";var y=[];let J=[];for(var N=-1,_=-1,I=0,E=0;E<b.length;E++){var C=b[E],k=M.encode(C);k=k.length>1?k.join(" "):k[0];let j;if(k&&C){for(var R=C.length,P=(M.split?C.replace(M.split,""):C).length-k.length,D="",H=0,F=0;F<f.length;F++){var V=f[F];if(V){var T=V.length;T+=P<0?0:P,H&&T<=H||(V=k.indexOf(V),V>-1&&(D=(V?C.substring(0,V):"")+o+C.substring(V,V+T)+l+(V+T<R?C.substring(V+T):""),H=T,j=!0))}}D&&(h&&(N<0&&(N=d.length+(d?1:0)),_=d.length+(d?1:0)+D.length,I+=R,J.push(y.length),y.push({match:D})),d+=(d?" ":"")+D)}if(!j)C=b[E],d+=(d?" ":"")+C,h&&y.push({text:C});else if(h&&I>=h)break}if(I=J.length*(r.length-2),g||x||h&&d.length-I>h)if(I=h+I-m*2,E=_-N,g>0&&(E+=g),x>0&&(E+=x),E<=I)b=g?N-(g>0?g:0):N-((I-E)/2|0),y=x?_+(x>0?x:0):b+I,c||(b>0&&d.charAt(b)!==" "&&d.charAt(b-1)!==" "&&(b=d.indexOf(" ",b),b<0&&(b=0)),y<d.length&&d.charAt(y-1)!==" "&&d.charAt(y)!==" "&&(y=d.lastIndexOf(" ",y),y<_?y=_:++y)),d=(b?i:"")+d.substring(b,y)+(y<d.length?i:"");else{for(_=[],N={},I={},E={},C={},k={},D=P=R=0,F=H=1;;){var w=void 0;for(let j=0,B;j<J.length;j++){if(B=J[j],D)if(P!==D){if(E[j+1])continue;if(B+=D,N[B]){R-=m,I[j+1]=1,E[j+1]=1;continue}if(B>=y.length-1){if(B>=y.length){E[j+1]=1,B>=b.length&&(I[j+1]=1);continue}R-=m}if(d=y[B].text,T=x&&k[j])if(T>0){if(d.length>T)if(E[j+1]=1,c)d=d.substring(0,T);else continue;(T-=d.length)||(T=-1),k[j]=T}else{E[j+1]=1;continue}if(R+d.length+1<=h)d=" "+d,_[j]+=d;else if(c)w=h-R-1,w>0&&(d=" "+d.substring(0,w),_[j]+=d),E[j+1]=1;else{E[j+1]=1;continue}}else{if(E[j])continue;if(B-=P,N[B]){R-=m,E[j]=1,I[j]=1;continue}if(B<=0){if(B<0){E[j]=1,I[j]=1;continue}R-=m}if(d=y[B].text,T=g&&C[j])if(T>0){if(d.length>T)if(E[j]=1,c)d=d.substring(d.length-T);else continue;(T-=d.length)||(T=-1),C[j]=T}else{E[j]=1;continue}if(R+d.length+1<=h)d+=" ",_[j]=d+_[j];else if(c)w=d.length+1-(h-R),w>=0&&w<d.length&&(d=d.substring(w)+" ",_[j]=d+_[j]),E[j]=1;else{E[j]=1;continue}}else{d=y[B].match,g&&(C[j]=g),x&&(k[j]=x),j&&R++;let mt;if(B?!j&&m&&(R+=m):(I[j]=1,E[j]=1),B>=b.length-1||B<y.length-1&&y[B+1].match?mt=1:m&&(R+=m),R-=r.length-2,!j||R+d.length<=h)_[j]=d;else{w=H=F=I[j]=0;break}mt&&(I[j+1]=1,E[j+1]=1)}R+=d.length,w=N[B]=1}if(w)P===D?D++:P++;else{if(P===D?H=0:F=0,!H&&!F)break;H?(P++,D=P):D++}}d="";for(let j=0,B;j<_.length;j++)B=(I[j]?j?" ":"":(j&&!i?" ":"")+i)+_[j],d+=B;i&&!I[_.length]&&(d+=i)}u&&(d=d.replace(u," ")),X[$].highlight=d}if(n)break}return s}function O(t,s){if(!this||this.constructor!==O)return new O(t,s);let e=0,n,i,r,o,l,h;if(t&&t.index){const c=t;if(s=c.index,e=c.boost||0,i=c.query){r=c.field||c.pluck,o=c.highlight;const u=c.resolve;t=c.async||c.queue,c.resolve=!1,c.index=null,t=t?s.searchAsync(c):s.search(c),c.resolve=u,c.index=s,t=t.result||t}else t=[]}if(t&&t.then){const c=this;t=t.then(function(u){c.C[0]=c.result=u.result||u,te(c)}),n=[t],t=[],l=new Promise(function(u){h=u})}this.index=s||null,this.result=t||[],this.h=e,this.C=n||[],this.await=l||null,this.return=h||null,this.highlight=o||null,this.query=i||"",this.field=r||""}v=O.prototype;v.limit=function(t){if(this.await){const s=this;this.C.push(function(){return s.limit(t).result})}else if(this.result.length){const s=[];for(let e=0,n;e<this.result.length;e++)if(n=this.result[e])if(n.length<=t){if(s[e]=n,t-=n.length,!t)break}else{s[e]=n.slice(0,t);break}this.result=s}return this};v.offset=function(t){if(this.await){const s=this;this.C.push(function(){return s.offset(t).result})}else if(this.result.length){const s=[];for(let e=0,n;e<this.result.length;e++)(n=this.result[e])&&(n.length<=t?t-=n.length:(s[e]=n.slice(t),t=0));this.result=s}return this};v.boost=function(t){if(this.await){const s=this;this.C.push(function(){return s.boost(t).result})}else this.h+=t;return this};function te(t,s){let e=t.result;var n=t.await;t.await=null;for(let i=0,r;i<t.C.length;i++)if(r=t.C[i]){if(typeof r=="function")e=r(),t.C[i]=e=e.result||e,i--;else if(r.h)e=r.h(),t.C[i]=e=e.result||e,i--;else if(r.then)return t.await=n}return n=t.return,t.C=[],t.return=null,s||n(e),e}v.resolve=function(t,s,e,n,i){let r=this.await?te(this,!0):this.result;if(r.then){const o=this;return r.then(function(){return o.resolve(t,s,e,n,i)})}return r.length&&(typeof t=="object"?(n=t.highlight||this.highlight,e=!!n||t.enrich,s=t.offset,t=t.limit):(n=n||this.highlight,e=!!n||e),r=i?e?at.call(this.index,r):r:qt.call(this.index,r,t||100,s,e)),this.finalize(r,n)};v.finalize=function(t,s){if(t.then){const n=this;return t.then(function(i){return n.finalize(i,s)})}s&&t.length&&this.query&&(t=Et(this.query,t,this.index.index,this.field,s));const e=this.return;return this.highlight=this.index=this.result=this.C=this.await=this.return=null,this.query=this.field="",e&&e(t),t};function Dt(t,s,e,n,i,r,o){const l=t.length;let h=[],c,u;c=L();for(let a=0,m,g,x,f;a<s;a++)for(let d=0;d<l;d++)if(x=t[d],a<x.length&&(m=x[a]))for(let b=0;b<m.length;b++){if(g=m[b],(u=c[g])?c[g]++:(u=0,c[g]=1),f=h[u]||(h[u]=[]),!o){let y=a+(d||!i?0:r||0);f=f[y]||(f[y]=[])}if(f.push(g),o&&e&&u===l-1&&f.length-n===e)return n?f.slice(n):f}if(t=h.length)if(i)h=h.length>1?Fe(h,e,n,o,r):(h=h[0])&&e&&h.length>e||n?h.slice(n,e+n):h;else{if(t<l)return[];if(h=h[t-1],e||n)if(o)(h.length>e||n)&&(h=h.slice(n,e+n));else{i=[];for(let a=0,m;a<h.length;a++)if(m=h[a]){if(n&&m.length>n)n-=m.length;else if((e&&m.length>e||n)&&(m=m.slice(n,e+n),e-=m.length,n&&(n-=m.length)),i.push(m),!e)break}h=i}}return h}function Fe(t,s,e,n,i){const r=[],o=L();let l;var h=t.length;let c;if(n){for(i=h-1;i>=0;i--)if(c=(n=t[i])&&n.length){for(h=0;h<c;h++)if(l=n[h],!o[l]){if(o[l]=1,e)e--;else if(r.push(l),r.length===s)return r}}}else for(let u=h-1,a,m=0;u>=0;u--){a=t[u];for(let g=0;g<a.length;g++)if(c=(n=a[g])&&n.length){for(let x=0;x<c;x++)if(l=n[x],!o[l])if(o[l]=1,e)e--;else{let f=(g+(u<h-1&&i||0))/(u+1)|0;if((r[f]||(r[f]=[])).push(l),++m===s)return r}}}return r}function qs(t,s,e,n,i){const r=L(),o=[];for(let l=0,h;l<s.length;l++){h=s[l];for(let c=0;c<h.length;c++)r[h[c]]=1}if(i){for(let l=0,h;l<t.length;l++)if(h=t[l],r[h]){if(n)n--;else if(o.push(h),r[h]=0,e&&--e===0)break}}else for(let l=0,h,c;l<t.result.length;l++)for(h=t.result[l],s=0;s<h.length;s++)c=h[s],r[c]&&((o[l]||(o[l]=[])).push(c),r[c]=0);return o}gt.prototype.search=function(t,s,e,n){e||(!s&&wt(t)?(e=t,t=""):wt(s)&&(e=s,s=0));let i=[];var r=[];let o,l,h,c,u,a,m=0,g=!0,x;if(e){e.constructor===Array&&(e={index:e}),t=e.query||t,o=e.pluck,l=e.merge,c=e.boost,a=o||e.field||(a=e.index)&&(a.index?null:a);var f=this.tag&&e.tag;h=e.suggest,g=e.resolve!==!1,u=e.cache,x=g&&this.store&&e.highlight;var d=!!x||g&&this.store&&e.enrich;s=e.limit||s;var b=e.offset||0;if(s||(s=g?100:0),f&&(!this.db||!n)){f.constructor!==Array&&(f=[f]);var y=[];for(let C=0,k;C<f.length;C++)if(k=f[C],k.field&&k.tag){var N=k.tag;if(N.constructor===Array)for(var _=0;_<N.length;_++)y.push(k.field,N[_]);else y.push(k.field,N)}else{N=Object.keys(k);for(let R=0,P,D;R<N.length;R++)if(P=N[R],D=k[P],D.constructor===Array)for(_=0;_<D.length;_++)y.push(P,D[_]);else y.push(P,D)}if(f=y,!t){if(r=[],y.length)for(f=0;f<y.length;f+=2){if(this.db){if(n=this.index.get(y[f]),!n)continue;r.push(n=n.db.tag(y[f+1],s,b,d))}else n=ti.call(this,y[f],y[f+1],s,b,d);i.push(g?{field:y[f],tag:y[f+1],result:n}:[n])}if(r.length){const C=this;return Promise.all(r).then(function(k){for(let R=0;R<k.length;R++)g?i[R].result=k[R]:i[R]=k[R];return g?i:new O(i.length>1?Dt(i,1,0,0,h,c):i[0],C)})}return g?i:new O(i.length>1?Dt(i,1,0,0,h,c):i[0],this)}}g||o||!(a=a||this.field)||(Y(a)?o=a:(a.constructor===Array&&a.length===1&&(a=a[0]),o=a.field||a.index)),a&&a.constructor!==Array&&(a=[a])}a||(a=this.field);let I;y=(this.worker||this.db)&&!n&&[];for(let C=0,k,R,P;C<a.length;C++){if(R=a[C],this.db&&this.tag&&!this.B[C])continue;let D;if(Y(R)||(D=R,R=D.field,t=D.query||t,s=ht(D.limit,s),b=ht(D.offset,b),h=ht(D.suggest,h),x=g&&this.store&&ht(D.highlight,x),d=!!x||g&&this.store&&ht(D.enrich,d),u=ht(D.cache,u)),n)k=n[C];else{N=D||e||{},_=N.enrich;var E=this.index.get(R);if(f&&(this.db&&(N.tag=f,N.field=a,I=E.db.support_tag_search),!I&&_&&(N.enrich=!1),I||(N.limit=0,N.offset=0)),k=u?E.searchCache(t,f&&!I?0:s,N):E.search(t,f&&!I?0:s,N),f&&!I&&(N.limit=s,N.offset=b),_&&(N.enrich=_),y){y[C]=k;continue}}if(P=(k=k.result||k)&&k.length,f&&P){if(N=[],_=0,this.db&&n){if(!I)for(E=a.length;E<n.length;E++){let H=n[E];if(H&&H.length)_++,N.push(H);else if(!h)return g?i:new O(i,this)}}else for(let H=0,F,V;H<f.length;H+=2){if(F=this.tag.get(f[H]),!F){if(h)continue;return g?i:new O(i,this)}if(V=(F=F&&F.get(f[H+1]))&&F.length)_++,N.push(F);else if(!h)return g?i:new O(i,this)}if(_){if(k=qs(k,N,s,b,g),P=k.length,!P&&!h)return g?k:new O(k,this);_--}}if(P)r[m]=R,i.push(k),m++;else if(a.length===1)return g?i:new O(i,this)}if(y){if(this.db&&f&&f.length&&!I)for(d=0;d<f.length;d+=2){if(r=this.index.get(f[d]),!r){if(h)continue;return g?i:new O(i,this)}y.push(r.db.tag(f[d+1],s,b,!1))}const C=this;return Promise.all(y).then(function(k){return e&&(e.resolve=g),k.length&&(k=C.search(t,s,e,k)),k})}if(!m)return g?i:new O(i,this);if(o&&(!d||!this.store))return i=i[0],g?i:new O(i,this);for(y=[],b=0;b<r.length;b++){if(f=i[b],d&&f.length&&typeof f[0].doc>"u"&&(this.db?y.push(f=this.index.get(this.field[0]).db.enrich(f)):f=at.call(this,f)),o)return g?x?Et(t,f,this.index,o,x):f:new O(f,this);i[b]={field:r[b],result:f}}if(d&&this.db&&y.length){const C=this;return Promise.all(y).then(function(k){for(let R=0;R<k.length;R++)i[R].result=k[R];return x&&(i=Et(t,i,C.index,o,x)),l?fe(i):i})}return x&&(i=Et(t,i,this.index,o,x)),l?fe(i):i};function fe(t){const s=[],e=L(),n=L();for(let i=0,r,o,l,h,c,u,a;i<t.length;i++){r=t[i],o=r.field,l=r.result;for(let m=0;m<l.length;m++)c=l[m],typeof c!="object"?c={id:h=c}:h=c.id,(u=e[h])?u.push(o):(c.field=e[h]=[o],s.push(c)),(a=c.highlight)&&(u=n[h],u||(n[h]=u={},c.highlight=u),u[o]=a)}return s}function ti(t,s,e,n,i){return t=this.tag.get(t),t?(t=t.get(s),t?(s=t.length-n,s>0&&((e&&s>e||n)&&(t=t.slice(n,n+e)),i&&(t=at.call(this,t))),t):[]):[]}function at(t){if(!this||!this.store)return t;if(this.db)return this.index.get(this.field[0]).db.enrich(t);const s=Array(t.length);for(let e=0,n;e<t.length;e++)n=t[e],s[e]={id:n,doc:this.store.get(n)};return s}function gt(t){if(!this||this.constructor!==gt)return new gt(t);const s=t.document||t.doc||t;let e,n;if(this.B=[],this.field=[],this.D=[],this.key=(e=s.key||s.id)&&Mt(e,this.D)||"id",(n=t.keystore||0)&&(this.keystore=n),this.fastupdate=!!t.fastupdate,this.reg=!this.fastupdate||t.worker||t.db?n?new Z(n):new Set:n?new G(n):new Map,this.h=(e=s.store||null)&&e&&e!==!0&&[],this.store=e?n?new G(n):new Map:null,this.cache=(e=t.cache||null)&&new lt(e),t.cache=!1,this.worker=t.worker||!1,this.priority=t.priority||4,this.index=ei.call(this,t,s),this.tag=null,(e=s.tag)&&(typeof e=="string"&&(e=[e]),e.length)){this.tag=new Map,this.A=[],this.F=[];for(let i=0,r,o;i<e.length;i++){if(r=e[i],o=r.field||r,!o)throw Error("The tag field from the document descriptor is undefined.");r.custom?this.A[i]=r.custom:(this.A[i]=Mt(o,this.D),r.filter&&(typeof this.A[i]=="string"&&(this.A[i]=new String(this.A[i])),this.A[i].G=r.filter)),this.F[i]=o,this.tag.set(o,new Map)}}if(this.worker){this.fastupdate=!1,t=[];for(const i of this.index.values())i.then&&t.push(i);if(t.length){const i=this;return Promise.all(t).then(function(r){let o=0;for(const l of i.index.entries()){const h=l[0];let c=l[1];c.then&&(c=r[o],i.index.set(h,c),o++)}return i})}}else t.db&&(this.fastupdate=!1,this.mount(t.db))}v=gt.prototype;v.mount=function(t){let s=this.field;if(this.tag)for(let r=0,o;r<this.F.length;r++){o=this.F[r];var e=void 0;this.index.set(o,e=new Q({},this.reg)),s===this.field&&(s=s.slice(0)),s.push(o),e.tag=this.tag.get(o)}e=[];const n={db:t.db,type:t.type,fastupdate:t.fastupdate};for(let r=0,o,l;r<s.length;r++){n.field=l=s[r],o=this.index.get(l);const h=new t.constructor(t.id,n);h.id=t.id,e[r]=h.mount(o),o.document=!0,r?o.bypass=!0:o.store=this.store}const i=this;return this.db=Promise.all(e).then(function(){i.db=!0})};v.commit=async function(){const t=[];for(const s of this.index.values())t.push(s.commit());await Promise.all(t),this.reg.clear()};v.destroy=function(){const t=[];for(const s of this.index.values())t.push(s.destroy());return Promise.all(t)};function ei(t,s){const e=new Map;let n=s.index||s.field||s;Y(n)&&(n=[n]);for(let r=0,o,l;r<n.length;r++){if(o=n[r],Y(o)||(l=o,o=o.field),l=wt(l)?Object.assign({},t,l):t,this.worker){var i=void 0;i=(i=l.encoder)&&i.encode?i:new bt(typeof i=="string"?Be[i]:i||{}),i=new dt(l,i),e.set(o,i)}this.worker||e.set(o,new Q(l,this.reg)),l.custom?this.B[r]=l.custom:(this.B[r]=Mt(o,this.D),l.filter&&(typeof this.B[r]=="string"&&(this.B[r]=new String(this.B[r])),this.B[r].G=l.filter)),this.field[r]=o}if(this.h){t=s.store,Y(t)&&(t=[t]);for(let r=0,o,l;r<t.length;r++)o=t[r],l=o.field||o,o.custom?(this.h[r]=o.custom,o.custom.O=l):(this.h[r]=Mt(l,this.D),o.filter&&(typeof this.h[r]=="string"&&(this.h[r]=new String(this.h[r])),this.h[r].G=o.filter))}return e}function Mt(t,s){const e=t.split(":");let n=0;for(let i=0;i<e.length;i++)t=e[i],t[t.length-1]==="]"&&(t=t.substring(0,t.length-2))&&(s[n]=!0),t&&(e[n++]=t);return n<e.length&&(e.length=n),n>1?e:e[0]}v.append=function(t,s){return this.add(t,s,!0)};v.update=function(t,s){return this.remove(t).add(t,s)};v.remove=function(t){wt(t)&&(t=vt(t,this.key));for(var s of this.index.values())s.remove(t,!0);if(this.reg.has(t)){if(this.tag&&!this.fastupdate)for(let e of this.tag.values())for(let n of e){s=n[0];const i=n[1],r=i.indexOf(t);r>-1&&(i.length>1?i.splice(r,1):e.delete(s))}this.store&&this.store.delete(t),this.reg.delete(t)}return this.cache&&this.cache.remove(t),this};v.clear=function(){const t=[];for(const s of this.index.values()){const e=s.clear();e.then&&t.push(e)}if(this.tag)for(const s of this.tag.values())s.clear();return this.store&&this.store.clear(),this.cache&&this.cache.clear(),t.length?Promise.all(t):this};v.contain=function(t){return this.db?this.index.get(this.field[0]).db.has(t):this.reg.has(t)};v.cleanup=function(){for(const t of this.index.values())t.cleanup();return this};v.get=function(t){return this.db?this.index.get(this.field[0]).db.enrich(t).then(function(s){return s[0]&&s[0].doc||null}):this.store.get(t)||null};v.set=function(t,s){return typeof t=="object"&&(s=t,t=vt(s,this.key)),this.store.set(t,s),this};v.searchCache=Qt;v.export=si;v.import=ii;Ut(gt.prototype);function ee(t,s=0){let e=[],n=[];s&&(s=25e4/s*5e3|0);for(const i of t.entries())n.push(i),n.length===s&&(e.push(n),n=[]);return n.length&&e.push(n),e}function se(t,s){s||(s=new Map);for(let e=0,n;e<t.length;e++)n=t[e],s.set(n[0],n[1]);return s}function We(t,s=0){let e=[],n=[];s&&(s=25e4/s*1e3|0);for(const i of t.entries())n.push([i[0],ee(i[1])[0]||[]]),n.length===s&&(e.push(n),n=[]);return n.length&&e.push(n),e}function Ke(t,s){s||(s=new Map);for(let e=0,n,i;e<t.length;e++)n=t[e],i=s.get(n[0]),s.set(n[0],se(n[1],i));return s}function Ve(t){let s=[],e=[];for(const n of t.keys())e.push(n),e.length===25e4&&(s.push(e),e=[]);return e.length&&s.push(e),s}function Xe(t,s){s||(s=new Set);for(let e=0;e<t.length;e++)s.add(t[e]);return s}function At(t,s,e,n,i,r,o=0){const l=n&&n.constructor===Array;var h=l?n.shift():n;if(!h)return this.export(t,s,i,r+1);if((h=t((s?s+".":"")+(o+1)+"."+e,JSON.stringify(h)))&&h.then){const c=this;return h.then(function(){return At.call(c,t,s,e,l?n:null,i,r,o+1)})}return At.call(this,t,s,e,l?n:null,i,r,o+1)}function si(t,s,e=0,n=0){if(e<this.field.length){const o=this.field[e];if((s=this.index.get(o).export(t,o,e,n=1))&&s.then){const l=this;return s.then(function(){return l.export(t,o,e+1)})}return this.export(t,o,e+1)}let i,r;switch(n){case 0:i="reg",r=Ve(this.reg),s=null;break;case 1:i="tag",r=this.tag&&We(this.tag,this.reg.size),s=null;break;case 2:i="doc",r=this.store&&ee(this.store),s=null;break;default:return}return At.call(this,t,s,i,r||null,e,n)}function ii(t,s){var e=t.split(".");e[e.length-1]==="json"&&e.pop();const n=e.length>2?e[0]:"";if(e=e.length>2?e[2]:e[1],this.worker&&n)return this.index.get(n).import(t);if(s){if(typeof s=="string"&&(s=JSON.parse(s)),n)return this.index.get(n).import(e,s);switch(e){case"reg":this.fastupdate=!1,this.reg=Xe(s,this.reg);for(let i=0,r;i<this.field.length;i++)r=this.index.get(this.field[i]),r.fastupdate=!1,r.reg=this.reg;if(this.worker){s=[];for(const i of this.index.values())s.push(i.import(t));return Promise.all(s)}break;case"tag":this.tag=Ke(s,this.tag);break;case"doc":this.store=se(s,this.store)}}}function de(t,s){let e="";for(const n of t.entries()){t=n[0];const i=n[1];let r="";for(let o=0,l;o<i.length;o++){l=i[o]||[""];let h="";for(let c=0;c<l.length;c++)h+=(h?",":"")+(s==="string"?'"'+l[c]+'"':l[c]);h="["+h+"]",r+=(r?",":"")+h}r='["'+t+'",['+r+"]]",e+=(e?",":"")+r}return e}Q.prototype.remove=function(t,s){const e=this.reg.size&&(this.fastupdate?this.reg.get(t):this.reg.has(t));if(e){if(this.fastupdate){for(let n=0,i,r;n<e.length;n++)if((i=e[n])&&(r=i.length))if(i[r-1]===t)i.pop();else{const o=i.indexOf(t);o>=0&&i.splice(o,1)}}else kt(this.map,t),this.depth&&kt(this.ctx,t);s||this.reg.delete(t)}return this.db&&(this.commit_task.push({del:t}),this.M&&Je(this)),this.cache&&this.cache.remove(t),this};function kt(t,s){let e=0;var n=typeof s>"u";if(t.constructor===Array){for(let i=0,r,o,l;i<t.length;i++)if((r=t[i])&&r.length){if(n)return 1;if(o=r.indexOf(s),o>=0){if(r.length>1)return r.splice(o,1),1;if(delete t[i],e)return 1;l=1}else{if(l)return 1;e++}}}else for(let i of t.entries())n=i[0],kt(i[1],s)?e++:t.delete(n);return e}const ni={memory:{resolution:1},performance:{resolution:3,fastupdate:!0,context:{depth:1,resolution:1}},match:{tokenize:"forward"},score:{resolution:9,context:{depth:2,resolution:3}}};Q.prototype.add=function(t,s,e,n){if(s&&(t||t===0)){if(!n&&!e&&this.reg.has(t))return this.update(t,s);n=this.depth,s=this.encoder.encode(s,!n);const c=s.length;if(c){const u=L(),a=L(),m=this.resolution;for(let g=0;g<c;g++){let x=s[this.rtl?c-1-g:g];var i=x.length;if(i&&(n||!a[x])){var r=this.score?this.score(s,x,g,null,0):_t(m,c,g),o="";switch(this.tokenize){case"tolerant":if(q(this,a,x,r,t,e),i>2){for(let f=1,d,b,y,N;f<i-1;f++)d=x.charAt(f),b=x.charAt(f+1),y=x.substring(0,f)+b,N=x.substring(f+2),o=y+d+N,q(this,a,o,r,t,e),o=y+N,q(this,a,o,r,t,e);q(this,a,x.substring(0,x.length-1),r,t,e)}break;case"full":if(i>2){for(let f=0,d;f<i;f++)for(r=i;r>f;r--){o=x.substring(f,r),d=this.rtl?i-1-f:f;var l=this.score?this.score(s,x,g,o,d):_t(m,c,g,i,d);q(this,a,o,l,t,e)}break}case"bidirectional":case"reverse":if(i>1){for(l=i-1;l>0;l--){o=x[this.rtl?i-1-l:l]+o;var h=this.score?this.score(s,x,g,o,l):_t(m,c,g,i,l);q(this,a,o,h,t,e)}o=""}case"forward":if(i>1){for(l=0;l<i;l++)o+=x[this.rtl?i-1-l:l],q(this,a,o,r,t,e);break}default:if(q(this,a,x,r,t,e),n&&c>1&&g<c-1)for(i=this.N,o=x,r=Math.min(n+1,this.rtl?g+1:c-g),l=1;l<r;l++){x=s[this.rtl?c-1-g-l:g+l],h=this.bidirectional&&x>o;const f=this.score?this.score(s,o,g,x,l-1):_t(i+(c/2>i?0:1),c,g,r-1,l-1);q(this,u,h?o:x,f,t,e,h?x:o)}}}}this.fastupdate||this.reg.add(t)}}return this.db&&(this.commit_task.push(e?{ins:t}:{del:t}),this.M&&Je(this)),this};function q(t,s,e,n,i,r,o){let l,h;if(!(l=s[e])||o&&!l[o]){if(o?(s=l||(s[e]=L()),s[o]=1,h=t.ctx,(l=h.get(o))?h=l:h.set(o,h=t.keystore?new G(t.keystore):new Map)):(h=t.map,s[e]=1),(l=h.get(e))?h=l:h.set(e,h=l=[]),r){for(let c=0,u;c<l.length;c++)if((u=l[c])&&u.includes(i)){if(c<=n)return;u.splice(u.indexOf(i),1),t.fastupdate&&(s=t.reg.get(i))&&s.splice(s.indexOf(u),1);break}}if(h=h[n]||(h[n]=[]),h.push(i),h.length===2**31-1){if(s=new ft(h),t.fastupdate)for(let c of t.reg.values())c.includes(h)&&(c[c.indexOf(h)]=s);l[n]=h=s}t.fastupdate&&((n=t.reg.get(i))?n.push(h):t.reg.set(i,[h]))}}function _t(t,s,e,n,i){return e&&t>1?s+(n||0)<=t?e+(i||0):(t-1)/(s+(n||0))*(e+(i||0))+1|0:0}Q.prototype.search=function(t,s,e){if(e||(s||typeof t!="object"?typeof s=="object"&&(e=s,s=0):(e=t,t="")),e&&e.cache)return e.cache=!1,t=this.searchCache(t,s,e),e.cache=!0,t;let n=[],i,r,o,l=0,h,c,u,a,m;e&&(t=e.query||t,s=e.limit||s,l=e.offset||0,r=e.context,o=e.suggest,m=(h=e.resolve)&&e.enrich,u=e.boost,a=e.resolution,c=this.db&&e.tag),typeof h>"u"&&(h=this.resolve),r=this.depth&&r!==!1;let g=this.encoder.encode(t,!r);if(i=g.length,s=s||(h?100:0),i===1)return pe.call(this,g[0],"",s,l,h,m,c);if(i===2&&r&&!o)return pe.call(this,g[1],g[0],s,l,h,m,c);let x=L(),f=0,d;if(r&&(d=g[0],f=1),a||a===0||(a=d?this.N:this.resolution),this.db){if(this.db.search&&(e=this.db.search(this,g,s,l,o,h,m,c),e!==!1))return e;const b=this;return(async function(){for(let y,N;f<i;f++){if((N=g[f])&&!x[N]){if(x[N]=1,y=await Kt(b,N,d,0,0,!1,!1),y=me(y,n,o,a)){n=y;break}d&&(o&&y&&n.length||(d=N))}o&&d&&f===i-1&&!n.length&&(a=b.resolution,d="",f=-1,x=L())}return ge(n,a,s,l,o,u,h)})()}for(let b,y;f<i;f++){if((y=g[f])&&!x[y]){if(x[y]=1,b=Kt(this,y,d,0,0,!1,!1),b=me(b,n,o,a)){n=b;break}d&&(o&&b&&n.length||(d=y))}o&&d&&f===i-1&&!n.length&&(a=this.resolution,d="",f=-1,x=L())}return ge(n,a,s,l,o,u,h)};function ge(t,s,e,n,i,r,o){let l=t.length,h=t;if(l>1)h=Dt(t,s,e,n,i,r,o);else if(l===1)return o?qt.call(null,t[0],e,n):new O(t[0],this);return o?h:new O(h,this)}function pe(t,s,e,n,i,r,o){return t=Kt(this,t,s,e,n,i,r,o),this.db?t.then(function(l){return i?l||[]:new O(l,this)}):t&&t.length?i?qt.call(this,t,e,n):new O(t,this):i?[]:new O([],this)}function me(t,s,e,n){let i=[];if(t&&t.length){if(t.length<=n){s.push(t);return}for(let r=0,o;r<n;r++)(o=t[r])&&(i[r]=o);if(i.length){s.push(i);return}}if(!e)return i}function Kt(t,s,e,n,i,r,o,l){let h;return e&&(h=t.bidirectional&&s>e)&&(h=e,e=s,s=h),t.db?t.db.get(s,e,n,i,r,o,l):(t=e?(t=t.ctx.get(e))&&t.get(s):t.map.get(s),t)}function Q(t,s){if(!this||this.constructor!==Q)return new Q(t);if(t){var e=Y(t)?t:t.preset;e&&(t=Object.assign({},ni[e],t))}else t={};e=t.context;const n=e===!0?{depth:1}:e||{},i=Y(t.encoder)?Be[t.encoder]:t.encode||t.encoder||{};this.encoder=i.encode?i:typeof i=="object"?new bt(i):{encode:i},this.resolution=t.resolution||9,this.tokenize=e=(e=t.tokenize)&&e!=="default"&&e!=="exact"&&e||"strict",this.depth=e==="strict"&&n.depth||0,this.bidirectional=n.bidirectional!==!1,this.fastupdate=!!t.fastupdate,this.score=t.score||null,(e=t.keystore||0)&&(this.keystore=e),this.map=e?new G(e):new Map,this.ctx=e?new G(e):new Map,this.reg=s||(this.fastupdate?e?new G(e):new Map:e?new Z(e):new Set),this.N=n.resolution||3,this.rtl=i.rtl||t.rtl||!1,this.cache=(e=t.cache||null)&&new lt(e),this.resolve=t.resolve!==!1,(e=t.db)&&(this.db=this.mount(e)),this.M=t.commit!==!1,this.commit_task=[],this.commit_timer=null,this.priority=t.priority||4}v=Q.prototype;v.mount=function(t){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),t.mount(this)};v.commit=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.commit(this)};v.destroy=function(){return this.commit_timer&&(clearTimeout(this.commit_timer),this.commit_timer=null),this.db.destroy()};function Je(t){t.commit_timer||(t.commit_timer=setTimeout(function(){t.commit_timer=null,t.db.commit(t)},1))}v.clear=function(){return this.map.clear(),this.ctx.clear(),this.reg.clear(),this.cache&&this.cache.clear(),this.db?(this.commit_timer&&clearTimeout(this.commit_timer),this.commit_timer=null,this.commit_task=[],this.db.clear()):this};v.append=function(t,s){return this.add(t,s,!0)};v.contain=function(t){return this.db?this.db.has(t):this.reg.has(t)};v.update=function(t,s){const e=this,n=this.remove(t);return n&&n.then?n.then(()=>e.add(t,s)):this.add(t,s)};v.cleanup=function(){return this.fastupdate?(kt(this.map),this.depth&&kt(this.ctx),this):this};v.searchCache=Qt;v.export=function(t,s,e=0,n=0){let i,r;switch(n){case 0:i="reg",r=Ve(this.reg);break;case 1:i="cfg",r=null;break;case 2:i="map",r=ee(this.map,this.reg.size);break;case 3:i="ctx",r=We(this.ctx,this.reg.size);break;default:return}return At.call(this,t,s,i,r,e,n)};v.import=function(t,s){if(s)switch(typeof s=="string"&&(s=JSON.parse(s)),t=t.split("."),t[t.length-1]==="json"&&t.pop(),t.length===3&&t.shift(),t=t.length>1?t[1]:t[0],t){case"reg":this.fastupdate=!1,this.reg=Xe(s,this.reg);break;case"map":this.map=se(s,this.map);break;case"ctx":this.ctx=Ke(s,this.ctx)}};v.serialize=function(t=!0){let s="",e="",n="";if(this.reg.size){let r;for(var i of this.reg.keys())r||(r=typeof i),s+=(s?",":"")+(r==="string"?'"'+i+'"':i);s="index.reg=new Set(["+s+"]);",e=de(this.map,r),e="index.map=new Map(["+e+"]);";for(const o of this.ctx.entries()){i=o[0];let l=de(o[1],r);l="new Map(["+l+"])",l='["'+i+'",'+l+"]",n+=(n?",":"")+l}n="index.ctx=new Map(["+n+"]);"}return t?"function inject(index){"+s+e+n+"}":s+e+n};Ut(Q.prototype);const Ye=typeof window<"u"&&(window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB),Ot=["map","ctx","tag","reg","cfg"],nt=L();function Vt(t,s={}){if(!this||this.constructor!==Vt)return new Vt(t,s);typeof t=="object"&&(s=t,t=t.name),t||console.info("Default storage space was used, because a name was not passed."),this.id="flexsearch"+(t?":"+t.toLowerCase().replace(/[^a-z0-9_\-]/g,""):""),this.field=s.field?s.field.toLowerCase().replace(/[^a-z0-9_\-]/g,""):"",this.type=s.type,this.fastupdate=this.support_tag_search=!1,this.db=null,this.h={}}v=Vt.prototype;v.mount=function(t){return t.index?t.mount(this):(t.db=this,this.open())};v.open=function(){if(this.db)return this.db;let t=this;navigator.storage&&navigator.storage.persist&&navigator.storage.persist(),nt[t.id]||(nt[t.id]=[]),nt[t.id].push(t.field);const s=Ye.open(t.id,1);return s.onupgradeneeded=function(){const e=t.db=this.result;for(let n=0,i;n<Ot.length;n++){i=Ot[n];for(let r=0,o;r<nt[t.id].length;r++)o=nt[t.id][r],e.objectStoreNames.contains(i+(i!=="reg"&&o?":"+o:""))||e.createObjectStore(i+(i!=="reg"&&o?":"+o:""))}},t.db=it(s,function(e){t.db=e,t.db.onversionchange=function(){t.close()}})};v.close=function(){this.db&&this.db.close(),this.db=null};v.destroy=function(){const t=Ye.deleteDatabase(this.id);return it(t)};v.clear=function(){const t=[];for(let e=0,n;e<Ot.length;e++){n=Ot[e];for(let i=0,r;i<nt[this.id].length;i++)r=nt[this.id][i],t.push(n+(n!=="reg"&&r?":"+r:""))}const s=this.db.transaction(t,"readwrite");for(let e=0;e<t.length;e++)s.objectStore(t[e]).clear();return it(s)};v.get=function(t,s,e=0,n=0,i=!0,r=!1){t=this.db.transaction((s?"ctx":"map")+(this.field?":"+this.field:""),"readonly").objectStore((s?"ctx":"map")+(this.field?":"+this.field:"")).get(s?s+":"+t:t);const o=this;return it(t).then(function(l){let h=[];if(!l||!l.length)return h;if(i){if(!e&&!n&&l.length===1)return l[0];for(let c=0,u;c<l.length;c++)if((u=l[c])&&u.length){if(n>=u.length){n-=u.length;continue}const a=e?n+Math.min(u.length-n,e):u.length;for(let m=n;m<a;m++)h.push(u[m]);if(n=0,h.length===e)break}return r?o.enrich(h):h}return l})};v.tag=function(t,s=0,e=0,n=!1){t=this.db.transaction("tag"+(this.field?":"+this.field:""),"readonly").objectStore("tag"+(this.field?":"+this.field:"")).get(t);const i=this;return it(t).then(function(r){return!r||!r.length||e>=r.length?[]:!s&&!e?r:(r=r.slice(e,e+s),n?i.enrich(r):r)})};v.enrich=function(t){typeof t!="object"&&(t=[t]);const s=this.db.transaction("reg","readonly").objectStore("reg"),e=[];for(let n=0;n<t.length;n++)e[n]=it(s.get(t[n]));return Promise.all(e).then(function(n){for(let i=0;i<n.length;i++)n[i]={id:t[i],doc:n[i]?JSON.parse(n[i]):null};return n})};v.has=function(t){return t=this.db.transaction("reg","readonly").objectStore("reg").getKey(t),it(t).then(function(s){return!!s})};v.search=null;v.info=function(){};v.transaction=function(t,s,e){t+=t!=="reg"&&this.field?":"+this.field:"";let n=this.h[t+":"+s];if(n)return e.call(this,n);let i=this.db.transaction(t,s);this.h[t+":"+s]=n=i.objectStore(t);const r=e.call(this,n);return this.h[t+":"+s]=null,it(i).finally(function(){return r})};v.commit=async function(t){let s=t.commit_task,e=[];t.commit_task=[];for(let n=0,i;n<s.length;n++)i=s[n],i.del&&e.push(i.del);e.length&&await this.remove(e),t.reg.size&&(await this.transaction("map","readwrite",function(n){for(const i of t.map){const r=i[0],o=i[1];o.length&&(n.get(r).onsuccess=function(){let l=this.result;var h;if(l&&l.length){const c=Math.max(l.length,o.length);for(let u=0,a,m;u<c;u++)if((m=o[u])&&m.length){if((a=l[u])&&a.length)for(h=0;h<m.length;h++)a.push(m[h]);else l[u]=m;h=1}}else l=o,h=1;h&&n.put(l,r)})}}),await this.transaction("ctx","readwrite",function(n){for(const i of t.ctx){const r=i[0],o=i[1];for(const l of o){const h=l[0],c=l[1];c.length&&(n.get(r+":"+h).onsuccess=function(){let u=this.result;var a;if(u&&u.length){const m=Math.max(u.length,c.length);for(let g=0,x,f;g<m;g++)if((f=c[g])&&f.length){if((x=u[g])&&x.length)for(a=0;a<f.length;a++)x.push(f[a]);else u[g]=f;a=1}}else u=c,a=1;a&&n.put(u,r+":"+h)})}}}),t.store?await this.transaction("reg","readwrite",function(n){for(const i of t.store){const r=i[0],o=i[1];n.put(typeof o=="object"?JSON.stringify(o):1,r)}}):t.bypass||await this.transaction("reg","readwrite",function(n){for(const i of t.reg.keys())n.put(1,i)}),t.tag&&await this.transaction("tag","readwrite",function(n){for(const i of t.tag){const r=i[0],o=i[1];o.length&&(n.get(r).onsuccess=function(){let l=this.result;l=l&&l.length?l.concat(o):o,n.put(l,r)})}}),t.map.clear(),t.ctx.clear(),t.tag&&t.tag.clear(),t.store&&t.store.clear(),t.document||t.reg.clear())};function Bt(t,s,e){const n=t.value;let i,r=0;for(let o=0,l;o<n.length;o++){if(l=e?n:n[o]){for(let h=0,c,u;h<s.length;h++)if(u=s[h],c=l.indexOf(u),c>=0)if(i=1,l.length>1)l.splice(c,1);else{n[o]=[];break}r+=l.length}if(e)break}r?i&&t.update(n):t.delete(),t.continue()}v.remove=function(t){return typeof t!="object"&&(t=[t]),Promise.all([this.transaction("map","readwrite",function(s){s.openCursor().onsuccess=function(){const e=this.result;e&&Bt(e,t)}}),this.transaction("ctx","readwrite",function(s){s.openCursor().onsuccess=function(){const e=this.result;e&&Bt(e,t)}}),this.transaction("tag","readwrite",function(s){s.openCursor().onsuccess=function(){const e=this.result;e&&Bt(e,t,!0)}}),this.transaction("reg","readwrite",function(s){for(let e=0;e<t.length;e++)s.delete(t[e])})])};function it(t,s){return new Promise((e,n)=>{t.onsuccess=t.oncomplete=function(){s&&s(this.result),s=null,e(this.result)},t.onerror=t.onblocked=n,t=null})}const xe=Q,ri=Ts,oi=zs,Ge=S.forwardRef(({className:t,...s},e)=>p.jsx(Pe,{ref:e,className:jt("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s}));Ge.displayName=Pe.displayName;const Ze=S.forwardRef(({className:t,children:s,...e},n)=>p.jsxs(oi,{children:[p.jsx(Ge,{}),p.jsxs(Te,{ref:n,className:jt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] rounded-lg",t),...e,children:[s,p.jsxs($s,{className:"hidden sm:flex absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[p.jsx(we,{className:"h-4 w-4"}),p.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ze.displayName=Te.displayName;const li=S.forwardRef(({className:t,...s},e)=>p.jsx(ze,{ref:e,className:jt("text-lg font-semibold leading-none tracking-tight",t),...s}));li.displayName=ze.displayName;const Qe=S.forwardRef(({className:t,...s},e)=>p.jsx($e,{ref:e,className:jt("text-sm text-muted-foreground",t),...s}));Qe.displayName=$e.displayName;const hi={SEARCH_DEBOUNCE:150},pt={SEARCH_INDEX:"search_index",SEARCH_INDEX_VERSION:"search_index_version",SEARCH_HISTORY:"search_history"},Ue="1.0";function ci(t,s,e){let n=0;const i=t.title.toLowerCase(),r=t.description.toLowerCase(),o=t.content.toLowerCase(),l=(t.tags||[]).join(" ").toLowerCase();i===e?n+=1e3:i.startsWith(e)?n+=500:i.includes(e)&&(n+=300);const h=i.split(/\s+/),c=e.split(/\s+/);c.forEach(u=>{h.forEach(a=>{a===u?n+=50:a.startsWith(u)?n+=30:a.includes(u)&&(n+=10)})}),r.includes(e)&&(n+=100),c.forEach(u=>{r.includes(u)&&(n+=20)}),c.forEach(u=>{l.includes(u)&&(n+=40)}),o.includes(e)&&(n+=10),c.forEach(u=>{const a=(o.match(new RegExp(u,"g"))||[]).length;n+=a*2});try{const u=new Date(t.date),m=(new Date().getTime()-u.getTime())/(1e3*60*60*24);m<30?n+=5:m<90&&(n+=2)}catch{}return n}function qe(){try{const t=localStorage.getItem(pt.SEARCH_HISTORY);return t?JSON.parse(t):[]}catch{return[]}}function ui(t){if(t.trim())try{const s=qe(),e=t.trim().toLowerCase(),n=s.filter(r=>r.toLowerCase()!==e),i=[e,...n].slice(0,10);localStorage.setItem(pt.SEARCH_HISTORY,JSON.stringify(i))}catch{}}function ai(){try{const t=localStorage.getItem(pt.SEARCH_INDEX),s=localStorage.getItem(pt.SEARCH_INDEX_VERSION);if(t&&s===Ue)return{data:JSON.parse(t),version:s}}catch{}return null}function fi(t){try{localStorage.setItem(pt.SEARCH_INDEX,JSON.stringify(t)),localStorage.setItem(pt.SEARCH_INDEX_VERSION,Ue)}catch{}}function di(t,s,e=150){if(!t)return t.substring(0,e);if(!s)return t.substring(0,e)+(t.length>e?"...":"");const n=s.toLowerCase(),r=t.toLowerCase().indexOf(n);if(r===-1)return t.substring(0,e)+(t.length>e?"...":"");const o=Math.max(0,r-50),l=Math.min(t.length,r+s.length+e-50);let h=t.substring(o,l);return o>0&&(h="..."+h),l<t.length&&(h=h+"..."),h}const gi=({open:t,onOpenChange:s})=>{const[e,n]=S.useState(""),[i,r]=S.useState([]),[o,l]=S.useState(!1),[h,c]=S.useState(!1),[u,a]=S.useState(null),[m,g]=S.useState(0),[x,f]=S.useState([]),[d,b]=S.useState(null),[y,N]=S.useState(10),[_,I]=S.useState([]),E=S.useRef(null),C=S.useRef(null),k=S.useRef(null),R="search-results-listbox";S.useEffect(()=>{if(!t)return;let w=!1;return d?_.length===0&&x.length>0&&I(x.slice(0,5)):(async()=>{const M=ai();if(M&&M.data.length>0){f(M.data),c(!1);const K=new xe({tokenize:"forward"});M.data.forEach((z,X)=>{const $=[z.title||"",z.description||"",(z.tags||[]).join(" "),z.content||""].join(" ").toLowerCase();K.add(X,$)}),w||(b(K),I(M.data.slice(0,5)));return}c(!0),a(null);try{const K=await fetch("/api/search-index.json");if(!K.ok)throw new Error("Failed to load search index");const z=await K.json();if(w)return;fi(z),f(z),I(z.slice(0,5));const X=new xe({tokenize:"forward"});z.forEach(($,J)=>{const j=[$.title||"",$.description||"",($.tags||[]).join(" "),$.content||""].join(" ").toLowerCase();X.add(J,j)}),w||b(X)}catch(K){w||(console.error("Error loading search index:",K),a("Failed to load search index. Please try again later."))}finally{w||c(!1)}})(),()=>{w=!0}},[t,d,x.length,_.length]);const P=S.useCallback(w=>{if(!d||!w.trim()){r([]),g(0),N(10);return}l(!0),a(null);const A=w.toLowerCase().trim();try{ui(w);let M=d.search(A,{limit:50});if(M.length===0&&A.length>2){const $=A.split(/\s+/),J=new Set;$.forEach(j=>{j.length>2&&d.search(j,{limit:20}).forEach(mt=>J.add(Number(mt)))}),M=Array.from(J)}const z=M.map($=>x[Number($)]).filter(Boolean).map($=>({result:$,score:ci($,w,A)}));z.sort(($,J)=>J.score-$.score);const X=z.map($=>$.result);r(X),g(0),N(10)}catch(M){console.error("Search error:",M),a("An error occurred while searching. Please try again."),r([])}finally{l(!1)}},[d,x]);S.useEffect(()=>{if(!e.trim()){r([]),g(0),N(10);return}const w=setTimeout(()=>{P(e)},hi.SEARCH_DEBOUNCE);return()=>clearTimeout(w)},[e,P]),S.useEffect(()=>{t&&(setTimeout(()=>{E.current?.focus(),k.current&&(k.current.scrollTop=0)},100),n(""),r([]),g(0),N(10),a(null))},[t]),S.useEffect(()=>{if(k.current&&e.trim()){const w=setTimeout(()=>{k.current&&(k.current.scrollTop=0)},100);return()=>clearTimeout(w)}},[e]),S.useEffect(()=>{if(!t)return;const w=A=>{if(A.key==="ArrowDown"){A.preventDefault();const M=Math.min(y-1,i.length-1);g(K=>K<M?K+1:K)}else if(A.key==="ArrowUp")A.preventDefault(),g(M=>M>0?M-1:0);else if(A.key==="Enter"&&i[m]?.url){A.preventDefault();const M=i[m].url;M&&(window.location.href=M,s(!1))}else A.key==="Escape"&&s(!1)};return window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)},[t,i,m,s,y]),S.useEffect(()=>{if(C.current&&m>=0){const w=C.current.children[m];w&&w.scrollIntoView({behavior:"smooth",block:"nearest"})}},[m]);const D=(w,A)=>{if(!A.trim()||!w)return w;try{const M=A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return w.split(new RegExp(`(${M})`,"gi")).map((z,X)=>z.toLowerCase()===A.toLowerCase()?p.jsx("mark",{className:"bg-primary/20 text-primary dark:bg-primary/30 dark:text-primary font-medium",children:z},X):z)}catch{return w}},H=w=>{try{const A=new Date(w);return isNaN(A.getTime())?w:A.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return w}},F=qe(),V=i.length>y,T=i.slice(0,y);return p.jsx(ri,{open:t,onOpenChange:s,children:p.jsxs(Ze,{className:"max-w-full sm:max-w-lg md:max-w-2xl p-0 gap-0 overflow-hidden top-0 sm:top-[10%] translate-y-0 h-[100dvh] sm:h-auto sm:max-h-[85vh] flex flex-col rounded-none sm:rounded-lg data-[state=open]:slide-in-from-top-0 data-[state=closed]:slide-out-to-top-0",children:[p.jsx(Qe,{className:"sr-only",children:"Search blog posts by title, description, tags, or content"}),p.jsxs("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"sr-only",children:[h&&"Loading search index...",o&&"Searching...",!o&&!h&&e.trim()&&i.length>0&&`${i.length} result${i.length!==1?"s":""} found`,!o&&!h&&e.trim()&&i.length===0&&"No results found",m>=0&&i[m]&&`Selected: ${i[m].title}`]}),p.jsxs("div",{className:"flex shrink-0 items-center border-b border-border px-4 sm:px-4 pt-safe relative",children:[p.jsx(Lt,{className:"mr-3 h-5 w-5 shrink-0 text-muted-foreground sm:h-4 sm:w-4"}),p.jsx("input",{ref:E,type:"text",placeholder:"Search posts...",value:e,onChange:w=>n(w.target.value),className:"flex h-16 sm:h-14 w-full bg-transparent py-4 sm:py-3 pr-12 sm:pr-0 text-base sm:text-sm outline-none border-0 shadow-none appearance-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50 focus-visible:ring-0",style:{WebkitAppearance:"none",MozAppearance:"textfield",border:"none",outline:"none",boxShadow:"none"},"aria-label":"Search blog posts","aria-expanded":i.length>0,"aria-controls":R,"aria-activedescendant":i.length>0&&m>=0?`result-${m}`:void 0,role:"combobox","aria-autocomplete":"list"}),o&&p.jsx(js,{className:"absolute right-14 sm:relative sm:right-0 ml-2 h-5 w-5 sm:h-4 sm:w-4 animate-spin text-muted-foreground shrink-0"}),p.jsx("button",{onClick:()=>s(!1),className:"sm:hidden absolute right-4 top-1/2 -translate-y-1/2 rounded-lg p-2 opacity-70 transition-opacity active:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2","aria-label":"Close search",children:p.jsx(we,{className:"h-5 w-5"})})]}),u&&p.jsxs("div",{role:"alert",className:"flex shrink-0 items-center gap-2 rounded-md bg-destructive/10 p-3 text-sm text-destructive mx-4 mt-2",children:[p.jsx(ps,{className:"h-4 w-4 shrink-0"}),p.jsx("span",{children:u})]}),p.jsxs("div",{ref:k,className:"flex-1 min-h-0 overflow-y-auto overscroll-contain px-4 py-4 sm:px-2 sm:py-2",style:{WebkitOverflowScrolling:"touch"},children:[h&&p.jsx("div",{className:"space-y-2 py-4",children:[1,2,3].map(w=>p.jsxs("div",{className:"animate-pulse rounded-md bg-muted p-3",children:[p.jsx("div",{className:"h-4 w-3/4 bg-muted-foreground/20 rounded mb-2"}),p.jsx("div",{className:"h-3 w-full bg-muted-foreground/20 rounded mb-1"}),p.jsx("div",{className:"h-3 w-2/3 bg-muted-foreground/20 rounded"})]},w))}),!e.trim()&&!h&&p.jsxs("div",{className:"py-4",children:[_.length>0&&p.jsxs("div",{className:"mb-6",children:[p.jsx("h3",{className:"mb-3 px-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Recent Posts"}),p.jsx("ul",{className:"space-y-2 sm:space-y-1",children:_.map(w=>p.jsx("li",{children:p.jsxs("a",{href:w.url,onClick:()=>s(!1),className:"flex flex-col gap-2 rounded-lg sm:rounded-md p-4 sm:p-3 transition-colors active:bg-muted focus:bg-muted focus:outline-none focus:ring-2 focus:ring-ring",children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsx("h3",{className:"font-medium text-base sm:text-sm leading-tight",children:w.title}),p.jsxs("div",{className:"flex shrink-0 items-center gap-1 text-xs text-muted-foreground",children:[p.jsx(ie,{className:"h-3 w-3"}),p.jsx("span",{className:"hidden sm:inline",children:H(w.date)})]})]}),w.description&&p.jsx("p",{className:"text-sm sm:text-xs text-muted-foreground line-clamp-2",children:w.description})]})},w.id))})]}),F.length>0&&p.jsxs("div",{children:[p.jsx("h3",{className:"mb-3 px-2 text-xs font-semibold uppercase tracking-wider text-muted-foreground",children:"Recent Searches"}),p.jsx("div",{className:"flex flex-wrap gap-2 px-2",children:F.slice(0,5).map((w,A)=>p.jsxs("button",{onClick:()=>n(w),className:"inline-flex items-center gap-1 rounded-md bg-muted px-2.5 py-1.5 text-xs text-muted-foreground transition-colors hover:bg-muted/80 focus:outline-none focus:ring-2 focus:ring-ring",children:[p.jsx(xs,{className:"h-3 w-3"}),w]},A))})]}),_.length===0&&F.length===0&&p.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[p.jsx(Lt,{className:"mb-2 h-8 w-8 text-muted-foreground"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:"Start typing to search posts..."}),p.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Search by title, description, tags, or content"})]})]}),e.trim()&&i.length===0&&!o&&!h&&p.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[p.jsx(ws,{className:"mb-2 h-8 w-8 text-muted-foreground"}),p.jsxs("p",{className:"text-sm text-muted-foreground",children:['No results found for "',e,'"']}),p.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Try different keywords or check your spelling"})]}),T.length>0&&p.jsx("ul",{ref:C,id:R,role:"listbox","aria-label":"Search results",className:"space-y-1",children:T.map((w,A)=>p.jsx("li",{id:`result-${A}`,role:"option","aria-selected":A===m,children:p.jsxs("a",{href:w.url,onClick:()=>s(!1),className:jt("flex flex-col gap-3 sm:gap-2.5 rounded-lg sm:rounded-md p-4 sm:p-3.5 transition-colors","active:bg-muted focus-visible:bg-muted focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",A===m&&"bg-muted"),"aria-label":`Go to ${w.title}`,children:[p.jsxs("div",{className:"flex items-start justify-between gap-2",children:[p.jsx("h3",{className:"font-medium text-base sm:text-sm leading-snug flex-1",children:D(w.title,e)}),p.jsxs("div",{className:"flex shrink-0 items-center gap-1 text-xs text-muted-foreground",children:[p.jsx(ie,{className:"h-3 w-3"}),p.jsx("span",{className:"hidden sm:inline",children:H(w.date)})]})]}),w.description&&p.jsx("p",{className:"text-sm sm:text-xs text-muted-foreground line-clamp-2 leading-relaxed",children:D(w.description,e)}),w.content&&p.jsx("p",{className:"hidden sm:block text-xs text-muted-foreground/80 line-clamp-2 leading-relaxed italic",children:D(di(w.content,e),e)}),w.tags&&w.tags.length>0&&p.jsxs("div",{className:"flex flex-wrap items-center gap-1.5",children:[w.tags.slice(0,3).map(M=>p.jsxs("span",{className:"inline-flex items-center gap-1 rounded-md bg-muted px-2 py-1 sm:px-1.5 sm:py-0.5 text-xs text-muted-foreground",children:[p.jsx(bs,{className:"h-3 w-3"}),M]},M)),w.tags.length>3&&p.jsxs("span",{className:"text-xs text-muted-foreground",children:["+",w.tags.length-3," more"]})]})]})},w.id))}),V&&p.jsx("div",{className:"mt-6 mb-4 sm:mt-4 sm:mb-2 flex justify-center pb-safe",children:p.jsxs("button",{onClick:()=>N(w=>Math.min(w+10,i.length)),className:"flex items-center gap-2 rounded-lg sm:rounded-md border border-border bg-background px-6 py-3 sm:px-4 sm:py-2 text-base sm:text-sm text-foreground transition-colors active:bg-muted focus:outline-none focus:ring-2 focus:ring-ring shadow-sm",children:[p.jsx(ds,{className:"h-5 w-5 sm:h-4 sm:w-4"}),"Load more (",i.length-y," remaining)"]})}),p.jsx("div",{className:"h-4 sm:h-2","aria-hidden":"true"})]}),i.length>0&&p.jsx("div",{className:"flex shrink-0 items-center justify-center border-t border-border bg-background px-4 py-3 sm:py-2 text-xs text-muted-foreground",children:p.jsxs("div",{className:"hidden sm:flex flex-wrap items-center gap-4",children:[p.jsxs("span",{children:[p.jsx("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100",children:"â†‘â†“"})," ","navigate"]}),p.jsxs("span",{children:[p.jsx("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100",children:"â†µ"})," ","select"]}),p.jsxs("span",{children:[p.jsx("kbd",{className:"pointer-events-none inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium opacity-100",children:"esc"})," ","close"]})]})})]})})};class ye extends S.Component{constructor(s){super(s),this.state={hasError:!1,error:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s}}componentDidCatch(s,e){}render(){return this.state.hasError?this.props.fallback?this.props.fallback:p.jsxs("div",{className:"rounded-lg border border-destructive/50 bg-destructive/10 p-6",role:"alert","aria-live":"assertive",children:[p.jsx("h2",{className:"text-lg font-semibold text-destructive mb-2",children:"Something went wrong"}),p.jsx("p",{className:"text-sm text-muted-foreground",children:this.state.error?.message||"An unexpected error occurred"}),p.jsx("button",{onClick:()=>this.setState({hasError:!1,error:null}),className:"mt-4 text-sm text-primary hover:underline",children:"Try again"})]}):this.props.children}}const ji=()=>{const[t,s]=S.useState(!1);return S.useEffect(()=>{const e=n=>{const i=n.target,r=i.tagName==="INPUT"||i.tagName==="TEXTAREA"||i.isContentEditable;(n.metaKey||n.ctrlKey)&&n.key==="k"&&!r&&(n.preventDefault(),s(!0))};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[]),p.jsxs(ye,{children:[p.jsxs(es,{variant:"outline",size:"icon",onClick:()=>s(!0),className:"size-9 border md:border-0 md:bg-transparent md:hover:bg-muted md:-my-2 md:-me-2 md:size-8",title:"Search (âŒ˜K)","aria-label":"Search blog posts","aria-expanded":t,"aria-haspopup":"dialog",children:[p.jsx(Lt,{className:"h-5 w-5 md:h-4 md:w-4"}),p.jsx("span",{className:"sr-only",children:"Search"})]}),p.jsx(ye,{children:p.jsx(gi,{open:t,onOpenChange:s})})]})};export{ji as default};
